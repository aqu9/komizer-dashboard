(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[157],{8368:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/inventory",function(){return s(8713)}])},4994:function(e,t,s){"use strict";var r=s(5893);t.Z=function(e){let{id:t,checked:s,onChange:l}=e;return(0,r.jsx)("input",{id:t,checked:s,onChange:l,type:"checkbox",className:"grid h-4 w-4 appearance-none place-content-center rounded border-2 border-gray-300 bg-transparent before:h-[1rem] before:w-[1rem] before:origin-bottom-left before:scale-0 before:shadow-[inset_1rem_1rem_#fff] before:content-[''] before:[clip-path:polygon(28%_38%,41%_53%,75%_24%,86%_38%,40%_78%,15%_50%)] checked:border-komiser-600 checked:bg-komiser-600 checked:before:scale-100 hover:border-gray-400 checked:hover:border-transparent checked:hover:bg-komiser-700"})}},1437:function(e,t,s){"use strict";var r=s(5893);t.Z=function(e){let{children:t,columns:s=2,gap:l="lg"}=e;return(0,r.jsx)("div",{className:"grid grid-cols-1 ".concat("sm"===l?"gap-4":""," ").concat("md"===l?"gap-6":""," ").concat("lg"===l?"gap-8":""," lg:grid-cols-2"),children:t})}},3160:function(e,t,s){"use strict";var r=s(5893);let l=e=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...e,children:(0,r.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"1.5",d:"M19.92 8.95l-6.52 6.52c-.77.77-2.03.77-2.8 0L4.08 8.95"})});t.Z=l},3677:function(e,t,s){"use strict";var r=s(5893),l=s(4184),n=s.n(l);t.Z=function(e){let{children:t,top:s="md",align:l="left",width:i="md"}=e;return(0,r.jsx)("div",{role:"tooltip",className:n()("absolute top-24 left-6 z-[1000] hidden animate-fade-in-up items-center rounded-lg bg-black-900 py-2 px-4 text-xs font-medium text-black-200 opacity-0 peer-hover:flex",{"top-[3rem]":"sm"===s},{"left-auto right-0":"right"===l},{"w-72":"lg"===i}),children:t})}},8713:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return e7}});var r,l,n=s(5893),i=s(9008),a=s.n(i),o=s(7091),c=s(550),d=s(2587);let h=e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...e,children:(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M7.757 16.243l8.486-8.486M16.243 16.243L7.757 7.757"})}),u=[{label:"Cloud provider",value:"provider",icon:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"1.5",d:"M9 22H7c-4 0-5-1-5-5V7c0-4 1-5 5-5h1.5c1.5 0 1.83.44 2.4 1.2l1.5 2c.38.5.6.8 1.6.8h3c4 0 5 1 5 5v2"}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"1.5",d:"M13.76 18.32c-2.35.17-2.35 3.57 0 3.74h5.56c.67 0 1.33-.25 1.82-.7 1.65-1.44.77-4.32-1.4-4.59-.78-4.69-7.56-2.91-5.96 1.56"})]})},{label:"Cloud account",value:"account",icon:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"1.5",d:"M5.54 11.12c-4.68.33-4.68 7.14 0 7.47h1.92M5.59 11.12C2.38 2.19 15.92-1.38 17.47 8c4.33.55 6.08 6.32 2.8 9.19-1 .91-2.29 1.41-3.64 1.4h-.09"}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"1.5",d:"M17 16.53c0 .74-.16 1.44-.46 2.06-.08.18-.17.35-.27.51A4.961 4.961 0 0112 21.53c-1.82 0-3.41-.98-4.27-2.43-.1-.16-.19-.33-.27-.51-.3-.62-.46-1.32-.46-2.06 0-2.76 2.24-5 5-5s5 2.24 5 5z"}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M10.44 16.53l.99.99 2.13-1.97"})]})},{label:"Cloud region",value:"region",icon:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12s4.48 10 10 10"}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M8 3h1a28.424 28.424 0 000 18H8M15 3c.97 2.92 1.46 5.96 1.46 9"}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M3 16v-1c2.92.97 5.96 1.46 9 1.46M3 9a28.424 28.424 0 0118 0M18.2 21.4a3.2 3.2 0 100-6.4 3.2 3.2 0 000 6.4zM22 22l-1-1"})]})},{label:"Cloud service",value:"service",icon:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"1.5",d:"M6.37 9.51c-4.08.29-4.07 6.2 0 6.49h9.66c1.17.01 2.3-.43 3.17-1.22 2.86-2.5 1.33-7.5-2.44-7.98C15.41-1.34 3.62 1.75 6.41 9.51M12 16v3M12 23a2 2 0 100-4 2 2 0 000 4zM18 21h-4M10 21H6"})})},{label:"Resource name",value:"name",icon:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M7.5 4h9c.62 0 1.17.02 1.66.09 2.63.29 3.34 1.53 3.34 4.91v6c0 3.38-.71 4.62-3.34 4.91-.49.07-1.04.09-1.66.09h-9c-.62 0-1.17-.02-1.66-.09C3.21 19.62 2.5 18.38 2.5 15V9c0-3.38.71-4.62 3.34-4.91C6.33 4.02 6.88 4 7.5 4zM13.5 10H17M7 15.5h10M10.095 10h.009M7.095 10h.009"})})},{label:"Cost",value:"cost",icon:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M8.672 14.33c0 1.29.99 2.33 2.22 2.33h2.51c1.07 0 1.94-.91 1.94-2.03 0-1.22-.53-1.65-1.32-1.93l-4.03-1.4c-.79-.28-1.32-.71-1.32-1.93 0-1.12.87-2.03 1.94-2.03h2.51c1.23 0 2.22 1.04 2.22 2.33M12 6v12"}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"})]})},{label:"All tags",value:"tags",icon:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M4.405 15.526l4.53 4.53a4.78 4.78 0 006.75 0l4.39-4.39a4.78 4.78 0 000-6.75l-4.54-4.52a4.75 4.75 0 00-3.6-1.39l-5 .24c-2 .09-3.59 1.68-3.69 3.67l-.24 5c-.06 1.35.45 2.66 1.4 3.61z"}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.5",d:"M9.735 12.226a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"1.5",d:"M13.235 17.226l4-4"})]})},{label:"Specific tag",value:"tag",icon:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M4.17 15.3l4.53 4.53a4.78 4.78 0 006.75 0l4.39-4.39a4.78 4.78 0 000-6.75L15.3 4.17a4.75 4.75 0 00-3.6-1.39l-5 .24c-2 .09-3.59 1.68-3.69 3.67l-.24 5c-.06 1.35.45 2.66 1.4 3.61z"}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.5",d:"M9.5 12a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"})]})}];var x=function(e){var t;let{id:s,bg:r,data:l,deleteFilter:i,resetData:a}=e,c=u.findIndex(e=>e.value===l.field);function d(e){return"icon"===e?u[c].icon:"label"===e?u[c].label:e}return(0,n.jsxs)("div",{className:"".concat(r?"bg-white":"bg-black-100"," ").concat(i||a?"pr-12":"pr-4"," relative flex max-w-[calc(100vw-250px)] overflow-hidden rounded p-2 pr-12 text-xs text-black-900/70 md:max-w-[calc(100vw-400px)]"),children:[(i||a)&&(0,n.jsx)("div",{className:"absolute bottom-[.25rem] ".concat(i?"right-1.5":"right-0"," ").concat(r?"bg-white":"bg-black-100"),children:(0,n.jsx)(o.Z,{size:"xxs",style:"ghost",onClick:()=>{i?i(s):a()},children:(0,n.jsx)(h,{width:20,height:24})})}),(0,n.jsxs)("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[(0,n.jsx)("div",{className:"scale-75",children:d("icon")}),(0,n.jsx)("p",{children:d("label")}),l.tagKey&&(0,n.jsxs)("p",{children:[": ",l.tagKey]}),l.operator&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:":"}),(0,n.jsx)("span",{className:"font-medium text-black-900",children:"IS"===(t=l.operator)?"is":"IS_NOT"===t?"is not":"CONTAINS"===t?"contains":"NOT_CONTAINS"===t?"does not contain":"IS_EMPTY"===t&&"tags"!==l.field?"is empty":"IS_EMPTY"===t&&"tags"===l.field?"which are empty":"IS_NOT_EMPTY"===t&&"tags"!==l.field?"is not empty":"IS_NOT_EMPTY"===t&&"tags"===l.field?"which are not empty":"EQUAL"===t?"is equal to":"BETWEEN"===t?"is between":"GREATER_THAN"===t?"is greater than":"LESS_THAN"===t?"is less than":"EXISTS"===t?"does exist":"NOT_EXISTS"===t?"does not exist":t})]}),l.values&&l.values.length>0&&l.values.map((e,t)=>(0,n.jsxs)("p",{children:[0===t&&(0,n.jsx)("span",{className:"mr-1",children:":"}),(0,n.jsxs)("span",{children:["cost"===l.field&&"$",e]}),l.values.length>1&&t<l.values.length-1&&(0,n.jsx)("span",{className:"ml-1 font-medium text-black-900",children:"cost"===l.field&&"BETWEEN"===l.operator?"and":"or"})]},t))]})]})},m=function(e){let{hasFilters:t,displayedFilters:s,isNotCustomView:r,deleteFilter:l,router:i}=e;return(0,n.jsx)(n.Fragment,{children:t&&(0,n.jsxs)("div",{className:"mb-6 flex flex-wrap items-center gap-x-4 gap-y-2 rounded-lg bg-white py-2 px-6",children:[(0,n.jsx)("div",{className:"h-full text-sm text-black-400",children:"Filters"}),s&&s.map((e,t)=>(0,n.jsx)(x,{id:t,data:e,deleteFilter:r?l:void 0},t)),r&&(0,n.jsxs)(o.Z,{size:"xs",style:"ghost",onClick:()=>i.push(i.pathname),children:[(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",className:"text-black-400",children:[(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"1.5",d:"M13.41 20.79L12 21.7c-1.31.81-3.13-.1-3.13-1.72v-5.35c0-.71-.4-1.62-.81-2.12L4.22 8.47c-.51-.51-.91-1.41-.91-2.02V4.13c0-1.21.91-2.12 2.02-2.12h13.34c1.11 0 2.02.91 2.02 2.02v2.22c0 .81-.51 1.82-1.01 2.32"}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"1.5",d:"M21.63 14.75c0 .89-.25 1.73-.69 2.45a4.709 4.709 0 01-4.06 2.3 4.73 4.73 0 01-4.06-2.3 4.66 4.66 0 01-.69-2.45c0-2.62 2.13-4.75 4.75-4.75s4.75 2.13 4.75 4.75zM18.15 15.99l-2.51-2.51M18.13 13.51l-2.51 2.51"}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"1.5",d:"M20.69 4.02v2.22c0 .81-.51 1.82-1.01 2.33l-1.76 1.55a4.42 4.42 0 00-1.04-.12c-2.62 0-4.75 2.13-4.75 4.75 0 .89.25 1.73.69 2.45.37.62.88 1.15 1.5 1.53v.34c0 .61-.4 1.42-.91 1.72L12 21.7c-1.31.81-3.13-.1-3.13-1.72v-5.35c0-.71-.41-1.62-.81-2.12L4.22 8.47c-.5-.51-.91-1.42-.91-2.02V4.12C3.31 2.91 4.22 2 5.33 2h13.34c1.11 0 2.02.91 2.02 2.02z"})]}),"Clear filters"]})]})})},g=function(e){let{isNotCustomView:t,children:s}=e;return(0,n.jsxs)("div",{className:"flex min-h-[40px] items-center justify-between gap-8",children:[t&&(0,n.jsx)("p",{className:"flex items-center gap-2 text-lg font-medium text-black-900",children:"All Resources"}),(0,n.jsx)("div",{className:"flex flex-shrink-0 items-center gap-4",children:s})]})},p=s(7294),v=s(6696),f=function(e){let{children:t,views:s,router:r,error:l,inventory:i,searchedInventory:a}=e,[o,c]=(0,p.useState)(""),{displayBanner:d}=(0,p.useContext)(v.Z),h=s;o&&s&&s.length>0&&(h=s.filter(e=>e.name.toLowerCase().includes(o.toLowerCase()))),i&&i.length>0||a&&a.length;let u=i&&0===i.length||a&&0===a.length,x=s&&0===s.length,m=l&&u||x;return(0,n.jsxs)(n.Fragment,{children:[!m&&(0,n.jsxs)("nav",{className:"fixed ".concat(d?"mt-[145px]":"mt-[73px]"," left-0 bottom-0 top-0 z-20 flex w-[17rem] flex-col gap-4 bg-white p-6"),children:[(0,n.jsx)("button",{onClick:()=>{r.push(r.pathname)},className:"flex items-center gap-3 rounded-lg px-4 py-3 text-left text-sm font-medium\n              ".concat(r.query.view?"text-black-400 transition-colors hover:bg-komiser-100":"border-l-2 border-primary bg-komiser-150 text-primary","\n            "),children:(0,n.jsx)("div",{className:r.query.view?"":"ml-[-2px]",children:(0,n.jsx)("p",{className:"w-[192px] truncate",children:"All resources"})})}),s&&s.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{placeholder:"Search views",value:o,onChange:e=>c(e.target.value),className:"flex w-full items-center rounded-lg border border-black-200 px-4 py-3 pl-10 text-sm font-medium text-black-400 transition-colors hover:border-black-300 focus-visible:outline-primary"}),(0,n.jsx)("div",{className:"absolute top-[0.95rem] left-4 ".concat(o?"cursor-pointer":""),children:o?(0,n.jsx)("svg",{onClick:()=>c(""),xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",className:"hover:bg-black-100",children:(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M7.757 16.243l8.486-8.486M16.243 16.243L7.757 7.757"})}):(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M11.5 21a9.5 9.5 0 100-19 9.5 9.5 0 000 19zM22 22l-2-2"})})})]}),(0,n.jsx)("div",{className:"-mx-4 -mr-6 flex flex-col gap-4 overflow-auto px-4 pr-6",children:h&&h.length>0&&h.map(e=>{let t=r.query.view===e.id.toString();return(0,n.jsx)("button",{onClick:()=>{t||r.push("?view=".concat(e.id))},className:"flex items-center gap-3 rounded-lg px-4 py-3 text-left text-sm font-medium\n              ".concat(t?"border-l-2 border-primary bg-komiser-150 text-primary":"text-black-400 transition-colors hover:bg-komiser-100","\n            "),children:(0,n.jsx)("div",{className:t?"ml-[-2px]":"",children:(0,n.jsx)("p",{className:"w-[188px] truncate",children:e.name})})},e.id)})})]}),o&&h&&0===h.length&&(0,n.jsx)("div",{className:"flex items-center text-xs text-black-400",children:"There are no views with this name."})]}),(0,n.jsx)("main",{className:m?"":"ml-[17rem]",children:t})]})},j=s(8978),w={providerLabel(e){let t;return"aws"===e.toLowerCase()&&(t="Amazon Web Services"),"gcp"===e.toLowerCase()&&(t="Google Cloud Platform"),"ovh"===e.toLowerCase()&&(t="OVH"),"digitalocean"===e.toLowerCase()&&(t="DigitalOcean"),"azure"===e.toLowerCase()&&(t="Azure"),"tencent"===e.toLowerCase()&&(t="Tencent"),"civo"===e.toLowerCase()&&(t="Civo"),"kubernetes"===e.toLowerCase()&&(t="Kubernetes"),"linode"===e.toLowerCase()&&(t="Linode"),"oci"===e.toLowerCase()&&(t="OCI"),"scaleway"===e.toLowerCase()&&(t="Scaleway"),"mongodbatlas"===e.toLowerCase()&&(t="MongoDB Atlas"),t},providerImg(e){let t;return"aws"===e.toLowerCase()&&(t="/assets/img/providers/aws.png"),"gcp"===e.toLowerCase()&&(t="/assets/img/providers/gcp.png"),"ovh"===e.toLowerCase()&&(t="/assets/img/providers/ovh.jpeg"),"digitalocean"===e.toLowerCase()&&(t="/assets/img/providers/digitalocean.png"),"azure"===e.toLowerCase()&&(t="/assets/img/providers/azure.svg"),"civo"===e.toLowerCase()&&(t="/assets/img/providers/civo.jpeg"),"kubernetes"===e.toLowerCase()&&(t="/assets/img/providers/kubernetes.png"),"linode"===e.toLowerCase()&&(t="/assets/img/providers/linode.png"),"tencent"===e.toLowerCase()&&(t="/assets/img/providers/tencent.jpeg"),"oci"===e.toLowerCase()&&(t="/assets/img/providers/oci.png"),"scaleway"===e.toLowerCase()&&(t="/assets/img/providers/scaleway.png"),"mongodbatlas"===e.toLowerCase()&&(t="/assets/img/providers/mongodbatlas.jpg"),t}};let k=e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...e,children:(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M6 12.632h12M12 18.632v-12"})});var b=function(e){let{isOpen:t,closeModal:s,children:r,noScroll:l}=e;return(0,p.useEffect)(()=>{function e(e){"Escape"===e.key&&s()}return document.addEventListener("keydown",e,!1),()=>{document.removeEventListener("keydown",e,!1)}},[]),(0,n.jsx)(n.Fragment,{children:t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{onClick:s,className:"fixed inset-0 z-30 hidden animate-fade-in bg-black-900/10 opacity-0 sm:block"}),(0,n.jsx)("div",{className:"fixed inset-0 z-30 flex w-full animate-fade-in-up flex-col gap-4 overflow-auto bg-white p-6 opacity-0 shadow-2xl sm:top-4 sm:bottom-4 sm:right-4 sm:left-auto sm:w-[38rem] sm:animate-fade-in-left sm:rounded-lg ".concat(l?"overflow-hidden":"overflow-auto"),children:r})]})})},y=function(e){let{goTo:t,page:s,tabs:r}=e;return(0,n.jsx)("div",{className:"border-b-2 border-black-150 text-center text-sm font-medium text-black-300",children:(0,n.jsx)("ul",{className:"-mb-[2px] flex justify-between sm:justify-start",children:r.map((e,r)=>(0,n.jsx)("li",{className:"mr-2",children:(0,n.jsx)("a",{onClick:()=>t(e.toLowerCase()),className:"inline-block cursor-pointer select-none rounded-t-lg border-b-2 py-4 px-2 sm:p-4 \n                     ".concat(s===e.toLowerCase()?"border-komiser-600 text-komiser-600 hover:text-komiser-600":"border-transparent hover:text-komiser-700"),children:e})},r))})})};let N=/./;var C=function(e){let{id:t,name:s,type:r="text",label:l,regex:i=N,error:a="Please provide a value",value:o,autofocus:c,min:d,positiveNumberOnly:h,action:u}=e,[x,m]=(0,p.useState)(void 0),g=(0,p.useRef)(null);return(0,p.useEffect)(()=>{if(c){var e;null===(e=g.current)||void 0===e||e.focus()}},[]),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{type:r,name:s,className:"peer w-full rounded bg-white px-4 pt-[1.75rem] pb-[0.75rem] text-sm text-black-900 caret-primary outline outline-black-200 focus:outline-2 focus:outline-primary ".concat(!1===x&&"outline-error-600 focus:outline-error-600"),placeholder:" ",onFocus:function(){m(void 0)},onBlur:e=>(function(e){let t=e.target.value.trim();if(!i||!t)return;let s=i.test(t);m(s)})(e),onChange:e=>{"number"==typeof t?u({[s]:e.target.value},t):u({[s]:e.target.value})},onKeyDown:e=>{h&&["-","+","e"].includes(e.key)&&e.preventDefault()},value:o,ref:g,min:d,autoComplete:"off","data-lpignore":"true","data-form-type":"other"}),(0,n.jsx)("span",{className:"pointer-events-none absolute left-4 bottom-[1.925rem] origin-left scale-75 select-none font-normal text-black-300 transition-all peer-placeholder-shown:left-4 peer-placeholder-shown:bottom-[1.15rem] peer-placeholder-shown:scale-[87.5%] peer-focus:bottom-[1.925rem] peer-focus:scale-75",children:l})]}),!1===x&&(0,n.jsx)("p",{className:"mt-2 text-xs text-error-600",children:a})]})},S=function(e){let{tag:t,id:s,handleChange:r}=e;return(0,n.jsxs)("div",{className:"grid flex-grow grid-cols-2 gap-4",children:[(0,n.jsx)(C,{id:s,name:"key",label:"Key",type:"text",error:"Please provide a valid key name.",action:r,value:t.key}),(0,n.jsx)(C,{id:s,name:"value",label:"Value",type:"text",error:"Please provide a valid value.",action:r,value:t.value})]})},E=function(e){let{closeModal:t,data:s,goTo:r,page:l,updateTags:i,tags:a,handleChange:c,removeTag:d,addNewTag:u,loading:x,deleteLoading:m,isOpen:g,bulkItems:p,updateBulkTags:v}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(b,{isOpen:g,closeModal:t,children:[(0,n.jsxs)("div",{className:"flex flex-wrap-reverse items-center justify-between gap-6 sm:flex-nowrap",children:[s&&(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-4 sm:flex-nowrap",children:[(0,n.jsx)("picture",{className:"flex-shrink-0",children:(0,n.jsx)("img",{src:w.providerImg(s.provider),className:"h-8 w-8 rounded-full",alt:s.provider})}),(0,n.jsxs)("div",{className:"flex flex-col gap-1 py-1",children:[(0,n.jsx)("p",{className:"... w-48 truncate font-medium text-black-900",children:s.service}),(0,n.jsxs)("p",{className:"flex items-center gap-2 text-xs text-black-300",children:[s.name,(0,n.jsx)("a",{target:"_blank",href:s.link,rel:"noreferrer",className:"hover:text-primary",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M13 11l8.2-8.2M22 6.8V2h-4.8M11 2H9C4 2 2 4 2 9v6c0 5 2 7 7 7h6c5 0 7-2 7-7v-2"})})})]})]})]}),!s&&p&&(0,n.jsxs)("div",{className:"flex flex-col gap-1 py-1",children:[(0,n.jsxs)("p",{className:"font-medium text-black-900",children:["Managing tags for ",(0,j.Z)(p.length)," ",p.length>1?"resources":"resource"]}),(0,n.jsx)("p",{className:"text-xs text-black-300",children:"All actions will overwrite previous tags for these resources"})]}),(0,n.jsx)("div",{className:"flex flex-shrink-0 items-center gap-2",children:(0,n.jsx)(o.Z,{style:"secondary",onClick:t,children:"Close"})})]}),(0,n.jsx)(y,{goTo:r,page:l,tabs:["Tags"]}),(0,n.jsxs)("div",{children:["tags"===l&&(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),!s&&p?v():i()},className:"flex flex-col gap-6 pt-2",children:[a&&a.map((e,t)=>(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(S,{tag:e,id:t,handleChange:c}),a.length>1&&(0,n.jsx)(o.Z,{size:"xxs",style:"ghost",onClick:()=>d(t),children:(0,n.jsx)(h,{width:24,height:24})})]},t)),(0,n.jsxs)(o.Z,{onClick:u,style:"secondary",size:"sm",children:[(0,n.jsx)(k,{width:24,height:24}),"Add new tag"]}),(0,n.jsxs)("div",{className:"flex items-center justify-end gap-6 pt-2",children:[(s&&s.tags&&s.tags.length>0||!s&&p)&&(0,n.jsx)(o.Z,{size:"lg",style:"delete",loading:m,onClick:()=>{!s&&p?r("delete"):i("delete")},children:m?"Deleting...":"Delete all tags"}),(0,n.jsx)(o.Z,{type:"submit",size:"lg",loading:x,disabled:a&&!a.every(e=>e.key.trim()&&e.value.trim()),children:s&&s.tags&&s.tags.length>0?"Save changes":"Add tags"})]})]}),"delete"===l&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex flex-col gap-6 bg-black-100 p-6",children:[(0,n.jsx)("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-error-100 text-error-600",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M12 22c5.5 0 10-4.5 10-10S17.5 2 12 2 2 6.5 2 12s4.5 10 10 10zM12 8v5M11.995 16h.009"})})}),(0,n.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,n.jsxs)("p",{className:"text-center font-medium text-black-900",children:["Are you sure you want to delete all tags from"," ",(0,j.Z)(p.length)," ",p.length>1?"resources":"resource","?"]}),(0,n.jsx)("p",{className:"text-sm text-black-400",children:"This is a permanent action, and it will also delete previous tags you have added to these resources."})]}),(0,n.jsxs)("div",{className:"flex items-center justify-end gap-6",children:[(0,n.jsx)(o.Z,{size:"lg",style:"ghost",onClick:()=>{r("tags")},children:"Cancel"}),(0,n.jsx)(o.Z,{size:"lg",style:"delete",loading:m,onClick:()=>v("delete"),children:m?"Deleting...":"Delete all tags"})]})]})})]})]})})},L=s(1163),T=s(3677),M=function(e){let{inventoryStats:t,error:s,statsLoading:r,hiddenResources:l}=e,i=(0,L.useRouter)();return(0,n.jsx)(n.Fragment,{children:!r&&t&&0!==t.resources&&0!==Object.keys(t).length&&!s&&(0,n.jsxs)("div",{className:"grid-col grid md:grid-cols-2 ".concat(i.query.view?"lg:grid-cols-4":"lg:grid-cols-3"," gap-8"),children:[(0,n.jsxs)("div",{className:"relative flex w-full items-center gap-4 rounded-lg bg-white py-8 px-6 text-black-900 transition-colors",children:[(0,n.jsx)("div",{className:" rounded-lg bg-komiser-100 p-4",children:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",className:"flex-shrink-0",children:[(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M3.17 7.44L12 12.55l8.77-5.08M12 21.61v-9.07"}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M9.93 2.48L4.59 5.44c-1.21.67-2.2 2.35-2.2 3.73v5.65c0 1.38.99 3.06 2.2 3.73l5.34 2.97c1.14.63 3.01.63 4.15 0l5.34-2.97c1.21-.67 2.2-2.35 2.2-3.73V9.17c0-1.38-.99-3.06-2.2-3.73l-5.34-2.97c-1.15-.63-3.01-.63-4.15.01z"})]})}),(0,n.jsxs)("div",{className:"peer flex flex-col",children:[(0,n.jsx)("p",{className:"text-xl font-medium",children:(0,j.Z)(t.resources,"full")}),(0,n.jsx)("p",{className:"text-sm text-black-300",children:"Resources"})]}),(0,n.jsx)(T.Z,{children:"Number of active cloud services"})]}),(0,n.jsxs)("div",{className:"relative flex w-full items-center gap-4 rounded-lg bg-white py-8 px-6 text-black-900 transition-colors",children:[(0,n.jsx)("div",{className:" rounded-lg bg-komiser-100 p-4",children:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",className:"flex-shrink-0",children:[(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M8 3h1a28.424 28.424 0 000 18H8M15 3a28.424 28.424 0 010 18"}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M3 16v-1a28.424 28.424 0 0018 0v1M3 9a28.424 28.424 0 0118 0"})]})}),(0,n.jsxs)("div",{className:"peer flex flex-col",children:[(0,n.jsx)("p",{className:"text-xl font-medium",children:t.regions}),(0,n.jsx)("p",{className:"text-sm text-black-300",children:"Regions"})]}),(0,n.jsx)(T.Z,{children:"Number of regions where you have active cloud services"})]}),(0,n.jsxs)("div",{className:"relative flex w-full items-center gap-4 rounded-lg bg-white py-8 px-6 text-black-900 transition-colors",children:[(0,n.jsx)("div",{className:" rounded-lg bg-komiser-100 p-4",children:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",className:"flex-shrink-0",children:[(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M18.04 13.55c-.42.41-.66 1-.6 1.63.09 1.08 1.08 1.87 2.16 1.87h1.9v1.19c0 2.07-1.69 3.76-3.76 3.76H6.26c-2.07 0-3.76-1.69-3.76-3.76v-6.73c0-2.07 1.69-3.76 3.76-3.76h11.48c2.07 0 3.76 1.69 3.76 3.76v1.44h-2.02c-.56 0-1.07.22-1.44.6z"}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M2.5 12.41V7.84c0-1.19.73-2.25 1.84-2.67l7.94-3a1.9 1.9 0 012.57 1.78v3.8M22.559 13.97v2.06c0 .55-.44 1-1 1.02h-1.96c-1.08 0-2.07-.79-2.16-1.87-.06-.63.18-1.22.6-1.63.37-.38.88-.6 1.44-.6h2.08c.56.02 1 .47 1 1.02zM7 12h7"})]})}),(0,n.jsxs)("div",{className:"peer flex flex-col",children:[(0,n.jsxs)("p",{className:"text-xl font-medium",children:["$",(0,j.Z)(t.costs)]}),(0,n.jsx)("p",{className:"text-sm text-black-300",children:"Cost"})]}),(0,n.jsx)(T.Z,{children:"Up-to-date monthly cost"})]}),i.query.view&&l&&(0,n.jsxs)("div",{className:"relative flex w-full items-center gap-4 rounded-lg bg-white py-8 px-6 text-black-900 transition-colors",children:[(0,n.jsx)("div",{className:" rounded-lg bg-komiser-100 p-4",children:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",className:"flex-shrink-0",children:[(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M15.03 9.47l-5.06 5.06a3.576 3.576 0 115.06-5.06z"}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M18.32 5.77c-1.75-1.32-3.75-2.04-5.82-2.04-3.53 0-6.82 2.08-9.11 5.68-.9 1.41-.9 3.78 0 5.19.79 1.24 1.71 2.31 2.71 3.17"}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M8.92 19.53c1.14.48 2.35.74 3.58.74 3.53 0 6.82-2.08 9.11-5.68.9-1.41.9-3.78 0-5.19-.33-.52-.69-1.01-1.06-1.47M16.01 12.7a3.565 3.565 0 01-2.82 2.82M9.97 14.53L2.5 22M22.5 2l-7.47 7.47"})]})}),(0,n.jsxs)("div",{className:"peer flex flex-col",children:[(0,n.jsx)("p",{className:"text-xl font-medium",children:(0,j.Z)(l.length)}),(0,n.jsx)("p",{className:"text-sm text-black-300",children:"Hidden resources"})]}),(0,n.jsx)(T.Z,{children:"Resources that will be hidden from the inventory"})]})]})})},O=s(4994),Z=function(){let e=Array.from(Array(6).keys());return(0,n.jsx)("div",{className:"grid-row grid animate-pulse overflow-hidden rounded-b-lg",children:e.map(e=>(0,n.jsx)("div",{className:"flex h-[57px] items-center border-b bg-white px-6 text-sm",children:(0,n.jsxs)("div",{className:"flex w-full items-center gap-6",children:[(0,n.jsx)("div",{className:"h-6 w-6 flex-shrink-0 rounded-full bg-komiser-200/50"}),(0,n.jsx)("div",{className:"h-4 w-[5%] rounded-lg bg-komiser-200/50"}),(0,n.jsx)("div",{className:"h-4 w-[20%] rounded-lg bg-komiser-200/50"}),(0,n.jsx)("div",{className:"h-4 w-[10%] rounded-lg bg-komiser-200/50"}),(0,n.jsx)("div",{className:"h-4 w-[30%] rounded-lg bg-komiser-200/50"}),(0,n.jsx)("div",{className:"h-4 w-[15%] rounded-lg bg-komiser-200/50"}),(0,n.jsx)("div",{className:"h-4 w-[5%] rounded-lg bg-komiser-200/50"})]})},e))})},_=s(6250);let I=e=>(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...e,children:[(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M9 11.5v6l2-2M9 17.5l-2-2"}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M22 10.5v5c0 5-2 7-7 7H9c-5 0-7-2-7-7v-6c0-5 2-7 7-7h5"}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M22 10.5h-4c-3 0-4-1-4-4v-4l8 8z"})]});var z=function(e){let{id:t,disabled:s,exportCSV:r}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"peer flex flex-col",children:(0,n.jsxs)(o.Z,{style:"dropdown",size:"sm",disabled:s,onClick:()=>r(t),children:[(0,n.jsx)(I,{width:24,height:24}),"Download CSV"]})}),s&&(0,n.jsx)(T.Z,{top:"sm",align:"right",width:"lg",children:"This feature isn't available yet. To download data from a filtered table, save it as a view and download it from there."})]})},A=function(e){let{setToast:t}=e,s=(0,L.useRouter)(),r=Object.keys(s.query).length>0&&!s.query.view,l=s.query.view?s.query.view.toString():void 0;return(0,n.jsx)(z,{id:l,disabled:r,exportCSV:function(e){_.Z.exportCSV(e),t({hasError:!1,title:"CSV exported",message:"The download of the CSV file should begin shortly."})}})};let W=e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...e,children:(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M11.5 21a9.5 9.5 0 100-19 9.5 9.5 0 000 19zM22 22l-2-2"})});var q=function(e){let{query:t,setQuery:s,error:r,setToast:l}=e;return(0,n.jsx)(n.Fragment,{children:!r&&(0,n.jsxs)("div",{className:"relative rounded-lg rounded-b-none",children:[t?(0,n.jsx)("div",{className:"absolute top-[1.7rem] left-6 cursor-pointer",onClick:()=>s(""),children:(0,n.jsx)(h,{width:16,height:16})}):(0,n.jsx)("div",{className:"absolute top-[1.625rem] left-6",children:(0,n.jsx)(W,{width:16,height:16})}),(0,n.jsx)("input",{value:t,onChange:e=>s(e.target.value),type:"text",placeholder:"Search by tags, service, name, region...",className:"w-full rounded-t-lg border-b border-black-200/30 bg-white py-6 pl-14 pr-6 text-sm text-black-900 caret-secondary placeholder:text-black-300 focus:outline-none",autoComplete:"off","data-lpignore":"true","data-form-type":"other"}),(0,n.jsx)("div",{className:"absolute top-[14px] right-4",children:(0,n.jsx)(A,{setToast:l})})]})})},B=function(e){let{query:t,setQuery:s,router:r}=e;return(0,n.jsxs)("div",{className:"flex w-full flex-wrap-reverse items-center justify-center gap-8 rounded-b-lg bg-white px-6 py-8 text-sm sm:py-20",children:[(0,n.jsx)("picture",{className:"flex-shrink-0",children:(0,n.jsx)("img",{src:"/assets/img/purplin/reading.svg",className:"w-32",alt:"No results"})}),(0,n.jsxs)("div",{className:"flex flex-col items-start gap-4",children:[(0,n.jsx)("div",{children:t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-black-300",children:"No results were found for:"}),(0,n.jsx)("p",{className:"font-medium",children:t})]}):(0,n.jsx)("p",{className:"text-black-300",children:"No results were found for this filter."})}),(0,n.jsxs)(o.Z,{style:"secondary",onClick:t?()=>{s("")}:()=>r.push(r.pathname),children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M7.757 16.243l8.486-8.486M16.243 16.243L7.757 7.757"})}),t?"Clear search":"Clear filters"]})]})]})},P=function(e){let{bulkItems:t,inventoryStats:s,openBulkModal:r,query:l,hideResourceFromCustomView:i,hideResourcesLoading:a}=e,c=(0,L.useRouter)();return(0,n.jsx)(n.Fragment,{children:t&&t.length>0&&(0,n.jsxs)("div",{className:"border-purplin-650 sticky bottom-0 flex w-full items-center justify-between bg-white py-4 px-6 text-sm font-medium shadow-[0px_-2px_4px_rgba(0,0,0,0.05)]",children:[(0,n.jsxs)("p",{className:"text-black-900",children:[t.length," ",t.length>1?"resources":"resource"," ",s&&!l&&"out of ".concat((0,j.Z)(s.resources))," ","selected"]}),(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsxs)(o.Z,{size:"sm",style:"primary",onClick:()=>r(t),children:["Manage tags",(0,n.jsx)("span",{className:"ml-1 flex items-center justify-center rounded-lg bg-white/10 py-1 px-2 text-xs",children:(0,j.Z)(t.length)})]}),c.query.view&&(0,n.jsxs)(o.Z,{size:"sm",style:"secondary",onClick:i,loading:a,children:["Hide from view",(0,n.jsx)("span",{className:"ml-1 flex items-center justify-center rounded-lg bg-primary/10 py-1 px-2 text-xs",children:(0,j.Z)(t.length)})]})]})]})})},V=function(e){let{id:t,children:s,bulkItems:r}=e;return(0,n.jsx)("tr",{className:"".concat(r&&r.find(e=>e===t)?"border-black-200/70 bg-komiser-120":"border-black-200/30 bg-white hover:bg-black-100/50"," border-b last:border-none"),children:s})},R=function(e){let{tags:t,setQuery:s,id:r,bulkItems:l}=e;return(0,n.jsx)(n.Fragment,{children:t&&t.length>0&&(0,n.jsxs)("div",{className:"group relative",children:[(0,n.jsxs)("div",{className:"relative flex items-center gap-1 py-4 px-6",children:[(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M4.17 15.3l4.53 4.53a4.78 4.78 0 006.75 0l4.39-4.39a4.78 4.78 0 000-6.75L15.3 4.17a4.75 4.75 0 00-3.6-1.39l-5 .24c-2 .09-3.59 1.68-3.69 3.67l-.24 5c-.06 1.35.45 2.66 1.4 3.61z"}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.5",d:"M9.5 12a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"})]}),(0,n.jsx)("span",{className:'text-black-900" absolute top-3 left-[2.375rem] flex h-4 w-4 items-center justify-center rounded-full bg-white text-[10px] font-bold '.concat(l&&l.find(e=>e===r)?"bg-komiser-120":""),children:t.length})]}),(0,n.jsx)("div",{className:"absolute right-6 top-11 z-10 hidden flex-col gap-2 rounded-lg bg-black-900 py-3 px-4 shadow-lg group-hover:flex",children:t.map((e,t)=>(0,n.jsxs)("div",{className:"-mx-4 flex items-center gap-2 border-t border-white/20 px-4 pt-2 text-xs text-black-200 first:border-none first:pt-0",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",fill:"none",viewBox:"0 0 24 24",className:"text-black-400",children:[(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M4.17 15.3l4.53 4.53a4.78 4.78 0 006.75 0l4.39-4.39a4.78 4.78 0 000-6.75L15.3 4.17a4.75 4.75 0 00-3.6-1.39l-5 .24c-2 .09-3.59 1.68-3.69 3.67l-.24 5c-.06 1.35.45 2.66 1.4 3.61z"}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.5",d:"M9.5 12a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"})]}),(0,n.jsxs)("span",{onClick:t=>{s(e.key)},className:"cursor-pointer hover:text-komiser-500",children:[e.key,":"]})]}),(0,n.jsx)("span",{onClick:()=>s(e.value),className:"cursor-pointer font-medium hover:text-komiser-500",children:e.value})]},t))})]})})},F=function(e){let{error:t,inventory:s,searchedInventory:r,query:l,openModal:i,setQuery:a,bulkSelectCheckbox:o,handleBulkSelection:c,bulkItems:d,onCheckboxChange:h,inventoryStats:u,openBulkModal:x,router:m,searchedLoading:g,hideResourceFromCustomView:p,hideResourcesLoading:v,setToast:f}=e;return(0,n.jsx)(n.Fragment,{children:(!t&&s&&s.length>0||!t&&r)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q,{query:l,setQuery:a,error:t,setToast:f}),(0,n.jsxs)("div",{className:"rounded-lg rounded-t-none pb-6",children:[(0,n.jsxs)("table",{className:"w-full table-auto bg-white text-left text-sm text-gray-900",children:[!t&&(0,n.jsx)("thead",{className:"sticky top-[73px] z-10 bg-white",children:(0,n.jsxs)("tr",{className:"shadow-[inset_0_-1px_0_0_#cfd7d74d]",children:[(0,n.jsx)("th",{className:"py-4 pl-6",children:(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(O.Z,{checked:o,onChange:c})})}),(0,n.jsx)("th",{className:"pl-2 pr-6",children:"Cloud"}),(0,n.jsx)("th",{className:"py-4 px-6",children:"Service"}),(0,n.jsx)("th",{className:"py-4 px-6",children:"Name"}),(0,n.jsx)("th",{className:"py-4 px-6",children:"Region"}),(0,n.jsx)("th",{className:"py-4 px-6",children:"Account"}),(0,n.jsx)("th",{className:"py-4 px-6 text-right",children:"Cost"}),(0,n.jsx)("th",{className:"py-4 px-6",children:"Tags"})]})}),(0,n.jsxs)("tbody",{children:[!l&&!r&&s&&s.length>0&&s.map(e=>(0,n.jsxs)(V,{id:e.id,bulkItems:d,children:[(0,n.jsx)("td",{className:"py-4 pl-6",children:(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(O.Z,{checked:d&&!!d.find(t=>t===e.id),onChange:t=>h(t,e.id)})})}),(0,n.jsx)("td",{onClick:()=>i(e),className:"min-w-[7rem] cursor-pointer py-4 pl-2 pr-6",children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("picture",{className:"flex-shrink-0",children:(0,n.jsx)("img",{src:w.providerImg(e.provider),className:"h-6 w-6 rounded-full",alt:e.provider})}),(0,n.jsx)("span",{children:e.provider})]})}),(0,n.jsx)("td",{onClick:()=>i(e),className:"cursor-pointer py-4 px-6",children:(0,n.jsx)("p",{className:"w-12 xl:w-full",children:e.service})}),(0,n.jsxs)("td",{onClick:()=>i(e),className:"group relative cursor-pointer py-4 px-6",children:[(0,n.jsx)("div",{className:"peer h-full w-full"}),(0,n.jsx)("p",{className:"... w-56 truncate 2xl:w-96",children:e.name}),(0,n.jsx)("div",{className:"absolute left-4 top-12 z-10 hidden flex-col gap-2 rounded-lg bg-black-900 py-3 px-4 text-xs text-black-200 shadow-lg group-hover:flex",children:e.name})]}),(0,n.jsx)("td",{onClick:()=>i(e),className:"cursor-pointer py-4 px-6",children:e.region}),(0,n.jsx)("td",{onClick:()=>i(e),className:"cursor-pointer py-4 px-6",children:e.account}),(0,n.jsxs)("td",{onClick:()=>i(e),className:"cursor-pointer whitespace-nowrap py-4 px-6 text-right",children:["$",(0,j.Z)(e.cost)]}),(0,n.jsx)("td",{children:(0,n.jsx)(R,{tags:e.tags,setQuery:a,id:e.id,bulkItems:d})})]},e.id)),!g&&r&&r.length>0&&r.map(e=>(0,n.jsxs)(V,{id:e.id,bulkItems:d,children:[(0,n.jsx)("td",{className:"py-4 pl-6",children:(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(O.Z,{checked:d&&!!d.find(t=>t===e.id),onChange:t=>h(t,e.id)})})}),(0,n.jsx)("td",{onClick:()=>i(e),className:"min-w-[7rem] cursor-pointer py-4 pl-2 pr-6",children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("picture",{className:"flex-shrink-0",children:(0,n.jsx)("img",{src:w.providerImg(e.provider),className:"h-6 w-6 rounded-full",alt:e.provider})}),(0,n.jsx)("span",{children:e.provider})]})}),(0,n.jsx)("td",{onClick:()=>i(e),className:"cursor-pointer py-4 px-6",children:(0,n.jsx)("p",{className:"w-12 xl:w-full",children:e.service})}),(0,n.jsxs)("td",{onClick:()=>i(e),className:"group relative cursor-pointer py-4 px-6",children:[(0,n.jsx)("div",{className:"peer h-full w-full"}),(0,n.jsx)("p",{className:"... w-56 truncate 2xl:w-96",children:e.name}),(0,n.jsx)("div",{className:"absolute left-4 top-12 z-10 hidden flex-col gap-2 rounded-lg bg-black-900 py-3 px-4 text-xs text-black-200 shadow-lg group-hover:flex",children:e.name})]}),(0,n.jsx)("td",{onClick:()=>i(e),className:"cursor-pointer py-4 px-6",children:e.region}),(0,n.jsx)("td",{onClick:()=>i(e),className:"cursor-pointer py-4 px-6",children:e.account}),(0,n.jsxs)("td",{onClick:()=>i(e),className:"cursor-pointer whitespace-nowrap py-4 px-6 text-right",children:["$",(0,j.Z)(e.cost)]}),(0,n.jsx)("td",{children:(0,n.jsx)(R,{tags:e.tags,setQuery:a,id:e.id,bulkItems:d})})]},e.id))]})]}),g&&(0,n.jsx)(Z,{}),r&&0===r.length&&!g&&(0,n.jsx)(B,{query:l,setQuery:a,router:m}),(0,n.jsx)(P,{bulkItems:d,inventoryStats:u,openBulkModal:x,query:l,hideResourceFromCustomView:p,hideResourcesLoading:v})]})]})})};let D={field:void 0,operator:void 0,tagKey:"",values:[]},H={min:"",max:""},K={hasError:!1,message:""};var Y=function(e){let{router:t,setSkippedSearch:s}=e,[r,l]=(0,p.useState)(0),[n,i]=(0,p.useState)(!1),[a,o]=(0,p.useState)(D),[c,d]=(0,p.useState)(H),[h,u]=(0,p.useState)(K);function x(){l(0),d(H),u(K),o({...D,values:[]})}function m(){x(),i(!n)}return(0,p.useEffect)(()=>{(c.min||c.max)&&o(e=>({...e,values:[c.min,c.max]}))},[c]),{toggle:m,isOpen:n,step:r,goTo:function(e){0===e?x():l(e)},handleField:function(e){o(t=>({...t,field:e})),l(1)},handleOperator:function(e){o(t=>({...t,operator:e})),l(2)},handleTagKey:function(e){o(t=>({...t,tagKey:e.tagKey}))},handleValueCheck:function(e,t){let s=a.values;if(e.currentTarget.checked)s.push(t),o(e=>({...e,values:s}));else{let e=s.findIndex(e=>e===t);s.splice(e,1),o(e=>({...e,values:s}))}},handleValueInput:function(e){o(t=>({...t,values:[e.values]}))},costBetween:c,handleCostBetween:function(e){d(t=>({...t,...e}))},inlineError:h,data:a,resetData:x,cleanValues:function(){o({...a,values:[]})},filter:function(){if(u(K),"BETWEEN"===a.operator){if(!a.values[0]||!a.values[1])return u({hasError:!0,message:"Please provide a min and max value."}),null;if(Number(a.values[0])>Number(a.values[1]))return u({hasError:!0,message:"Max number needs to be higher than min number."}),null;if(Number(a.values[0])===Number(a.values[1]))return u({hasError:!0,message:"Min and max values can not be the same."}),null}return"/inventory/"===t.asPath?t.push("?".concat("tag"===a.field?"tag:".concat(a.tagKey):a.field,":").concat(a.operator).concat(a.values.length>0?":".concat(a.values.map(e=>e)):""),void 0,{shallow:!0}):t.push("".concat(t.asPath,"&").concat("tag"===a.field?"tag:".concat(a.tagKey):a.field).concat(":".concat(a.operator)).concat(a.values.length>0?":".concat(a.values.map(e=>e)):"")),s(0),m(),null}}},U=function(e){let{step:t,goTo:s}=e;return(0,n.jsxs)("div",{className:"flex gap-2 text-xs text-black-300",children:[(0,n.jsx)("p",{className:"cursor-pointer ".concat(0===t?"text-black-900 hover:text-black-900":"hover:text-black-400"),onClick:()=>s(0),children:"Fields"}),0!==t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:">"}),(0,n.jsx)("p",{className:"cursor-pointer ".concat(1===t?"text-black-900 hover:text-black-900":"hover:text-black-400"),onClick:()=>s(1),children:"Operator"}),2===t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:">"}),(0,n.jsx)("p",{className:"cursor-pointer ".concat(2===t?"text-black-900 hover:text-black-900":"hover:text-black-400"),onClick:()=>s(2),children:"Value"})]})]})]})},G=function(e){let{handleField:t}=e;return(0,n.jsx)(n.Fragment,{children:u.map((e,s)=>(0,n.jsxs)(o.Z,{size:"sm",style:"dropdown",gap:"md",transition:!1,onClick:()=>t(e.value),children:[e.icon,e.label]},s))})};let X=[{label:"is",value:"IS"},{label:"is not",value:"IS_NOT"},{label:"contains",value:"CONTAINS"},{label:"does not contain",value:"NOT_CONTAINS"},{label:"is empty",value:"IS_EMPTY"},{label:"is not empty",value:"IS_NOT_EMPTY"}],J=[{label:"does exist",value:"EXISTS"},{label:"does not exist",value:"NOT_EXISTS"}],Q=[{label:"which are empty",value:"IS_EMPTY"},{label:"which are not empty",value:"IS_NOT_EMPTY"}],$=[{label:"is equal to",value:"EQUAL"},{label:"is between",value:"BETWEEN"},{label:"is greater than",value:"GREATER_THAN"},{label:"is less than",value:"LESS_THAN"}];var ee=function(e){let{data:t,handleOperator:s,handleTagKey:r}=e;return(0,n.jsxs)("div",{className:"flex flex-col",children:["tag"===t.field&&(0,n.jsx)("div",{className:"pl-1 pt-2 pb-2",children:(0,n.jsx)(C,{type:"text",name:"tagKey",label:"Tag key",value:t.tagKey,error:"Please provide a tag key",action:r,autofocus:!0})}),"tags"!==t.field&&"cost"!==t.field&&X.map((e,r)=>(0,n.jsx)(o.Z,{style:"dropdown",disabled:"tag"===t.field&&!t.tagKey,onClick:()=>s(e.value),children:e.label},r)),"tag"===t.field&&J.map((e,r)=>(0,n.jsx)(o.Z,{style:"dropdown",disabled:"tag"===t.field&&!t.tagKey,onClick:()=>s(e.value),children:e.label},r)),"tags"===t.field&&Q.map((e,t)=>(0,n.jsx)(o.Z,{style:"dropdown",onClick:()=>s(e.value),children:e.label},t)),"cost"===t.field&&$.map((e,t)=>(0,n.jsx)(o.Z,{style:"dropdown",onClick:()=>s(e.value),children:e.label},t))]})},et=function(e){let{data:t,handleValueCheck:s,handleValueInput:r,cleanValues:l,setToast:i,costBetween:a,handleCostBetween:o}=e,[c,d]=(0,p.useState)();return(0,p.useEffect)(()=>{"IS_EMPTY"===t.operator||"IS_NOT_EMPTY"===t.operator||"EXISTS"===t.operator||"NOT_EXISTS"===t.operator?(l(),d(void 0)):("provider"===t.field&&_.Z.getProviders().then(e=>{e===Error?i({hasError:!0,title:"There was an error when fetching the cloud providers",message:"Please refresh the page and try again."}):d(e)}),"account"===t.field&&_.Z.getAccounts().then(e=>{e===Error?i({hasError:!0,title:"There was an error when fetching the cloud accounts",message:"Please refresh the page and try again."}):d(e)}),"region"===t.field&&_.Z.getRegions().then(e=>{e===Error?i({hasError:!0,title:"There was an error when fetching the cloud regions",message:"Please refresh the page and try again."}):d(e)}),"service"===t.field&&_.Z.getServices().then(e=>{e===Error?i({hasError:!0,title:"There was an error when fetching the cloud services",message:"Please refresh the page and try again."}):d(e)}))},[]),(0,n.jsxs)("div",{className:"flex min-w-[19.05rem] flex-col gap-2",children:[c&&c.length>0&&c.map((e,r)=>(0,n.jsxs)("div",{className:"flex items-center gap-2 py-1",children:[(0,n.jsx)(O.Z,{id:e,onChange:t=>s(t,e),checked:!!t.values.find(t=>t===e)}),(0,n.jsx)("label",{htmlFor:e,className:"w-full",children:e})]},r)),!c&&"cost"!==t.field&&"IS_EMPTY"!==t.operator&&"IS_NOT_EMPTY"!==t.operator&&"EXISTS"!==t.operator&&"NOT_EXISTS"!==t.operator&&(0,n.jsx)("div",{className:"pl-1 pt-2 pr-4 pb-2",children:(0,n.jsx)(C,{type:"text",name:"values",label:"tag"===t.field?"Tag value":"Resource name",value:t.values,error:"Please provide a value",action:r,autofocus:!0})}),!c&&"cost"===t.field&&"BETWEEN"!==t.operator&&(0,n.jsx)("div",{className:"pl-1 pt-2 pr-4 pb-2",children:(0,n.jsx)(C,{type:"number",name:"values",label:"Value",value:t.values,error:"Value must be higher than 0.",action:r,autofocus:!0,min:0,positiveNumberOnly:!0})}),!c&&"cost"===t.field&&"BETWEEN"===t.operator&&(0,n.jsx)("div",{className:"pl-1 pt-2 pr-4 pb-2",children:(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsx)(C,{type:"number",name:"min",label:"Min value",value:a.min,error:"Value must be higher than 0.",action:o,autofocus:!0,min:0,positiveNumberOnly:!0}),(0,n.jsx)(C,{type:"number",name:"max",label:"Max value",value:a.max,error:"Value must be higher than 0.",action:o,min:0,positiveNumberOnly:!0})]})})]})};let es=e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...e,children:(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"1.5",d:"M5.4 2.1h13.2c1.1 0 2 .9 2 2v2.2c0 .8-.5 1.8-1 2.3l-4.3 3.8c-.6.5-1 1.5-1 2.3V19c0 .6-.4 1.4-.9 1.7l-1.4.9c-1.3.8-3.1-.1-3.1-1.7v-5.3c0-.7-.4-1.6-.8-2.1l-3.8-4c-.5-.5-.9-1.4-.9-2V4.2c0-1.2.9-2.1 2-2.1zM10.93 2.1L6 10"})});var er=function(e){let{router:t,setSkippedSearch:s,setToast:r}=e,{toggle:l,isOpen:i,step:a,goTo:c,handleField:d,handleOperator:h,handleTagKey:u,handleValueCheck:m,handleValueInput:g,costBetween:p,handleCostBetween:v,inlineError:f,data:j,resetData:w,cleanValues:k,filter:b}=Y({router:t,setSkippedSearch:s});return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)(o.Z,{style:"secondary",size:"xs",onClick:l,children:[(0,n.jsx)(es,{width:20,height:20}),"Filter by"]}),i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{onClick:l,className:"fixed inset-0 z-20 hidden animate-fade-in bg-transparent opacity-0 sm:block"}),(0,n.jsx)("div",{className:"absolute right-0 top-12 z-[21] inline-flex min-w-[16rem] max-w-[21rem] rounded-lg bg-white p-4 text-sm shadow-xl",children:(0,n.jsxs)("div",{className:"flex w-full flex-col",children:[(0,n.jsx)(U,{step:a,goTo:c}),(0,n.jsx)("div",{className:"mt-2"}),0!==a&&j&&j.field&&(0,n.jsx)(x,{data:j,resetData:w}),(0,n.jsx)("div",{className:"mt-2"}),0===a&&(0,n.jsx)(G,{handleField:d}),1===a&&(0,n.jsx)(ee,{data:j,handleTagKey:u,handleOperator:h}),2===a&&(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),b()},children:[(0,n.jsx)("div",{className:"-mr-4 max-h-[calc(100vh-23rem)] overflow-auto pb-2",children:(0,n.jsx)(et,{data:j,handleValueCheck:m,handleValueInput:g,cleanValues:k,setToast:r,costBetween:p,handleCostBetween:v})}),f.hasError&&(0,n.jsx)("p",{className:"pb-4 text-xs font-medium text-error-600",children:f.message}),(0,n.jsx)("div",{className:"-mx-4 -mb-4 flex justify-end border-t px-4 py-4",children:(0,n.jsx)(o.Z,{type:"submit",disabled:j&&"IS_EMPTY"!==j.operator&&"IS_NOT_EMPTY"!==j.operator&&"EXISTS"!==j.operator&&"NOT_EXISTS"!==j.operator&&j.values&&0===j.values.length,children:"Apply filter"})})]})]})})]})]})},el=s(5675),en=s.n(el);let ei=e=>(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...e,children:[(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"1.5",d:"M12.02 2.91c-3.31 0-6 2.69-6 6v2.89c0 .61-.26 1.54-.57 2.06L4.3 15.77c-.71 1.18-.22 2.49 1.08 2.93 4.31 1.44 8.96 1.44 13.27 0 1.21-.4 1.74-1.83 1.08-2.93l-1.15-1.91c-.3-.52-.56-1.45-.56-2.06V8.91c0-3.3-2.7-6-6-6z"}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"1.5",d:"M13.87 3.2a6.754 6.754 0 00-3.7 0c.29-.74 1.01-1.26 1.85-1.26.84 0 1.56.52 1.85 1.26z"}),(0,n.jsx)("path",{stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"1.5",d:"M15.02 19.06c0 1.65-1.35 3-3 3-.82 0-1.58-.34-2.12-.88a3.01 3.01 0 01-.88-2.12"})]}),ea=e=>(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...e,children:[(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M16 8.99v11.36c0 1.45-1.04 2.06-2.31 1.36l-3.93-2.19c-.42-.23-1.1-.23-1.52 0l-3.93 2.19c-1.27.7-2.31.09-2.31-1.36V8.99c0-1.71 1.4-3.11 3.11-3.11h7.78c1.71 0 3.11 1.4 3.11 3.11z"}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M22 5.11v11.36c0 1.45-1.04 2.06-2.31 1.36L16 15.77V8.99c0-1.71-1.4-3.11-3.11-3.11H8v-.77C8 3.4 9.4 2 11.11 2h7.78C20.6 2 22 3.4 22 5.11zM7 12h4M9 14v-4"})]});var eo=function(e){let{title:t,subtitle:s,closeModal:r,deleteAction:l,deleteLabel:i}=e;return(0,n.jsxs)("div",{className:"flex flex-wrap-reverse items-center justify-between gap-6 sm:flex-nowrap",children:[(0,n.jsx)("div",{className:"flex flex-wrap items-center gap-4 sm:flex-nowrap",children:(0,n.jsxs)("div",{className:"flex flex-col gap-1 py-1",children:[(0,n.jsx)("p",{className:"... w-48 truncate font-medium text-black-900",children:t}),(0,n.jsx)("p",{className:"flex items-center gap-2 text-xs text-black-300",children:s})]})}),(0,n.jsxs)("div",{className:"flex flex-shrink-0 items-center gap-4",children:[l&&(0,n.jsx)(o.Z,{style:"delete",onClick:l,children:i||"Delete"}),(0,n.jsx)(o.Z,{style:"secondary",onClick:r,children:"Close"})]})]})},ec=function(e){let{page:t,param:s,children:r,container:l=!1}=e;return(0,n.jsx)(n.Fragment,{children:t===s&&(0,n.jsx)("div",{className:l?"rounded-lg bg-black-100 p-6":"",children:(0,n.jsx)("div",{className:"flex flex-col gap-6",children:r})})})},ed=s(3160);let eh=e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...e,children:(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M21 5.98c-3.33-.33-6.68-.5-10.02-.5-1.98 0-3.96.1-5.94.3L3 5.98M8.5 4.97l.22-1.31C8.88 2.71 9 2 10.69 2h2.62c1.69 0 1.82.75 1.97 1.67l.22 1.3M18.85 9.14l-.65 10.07C18.09 20.78 18 22 15.21 22H8.79C6 22 5.91 20.78 5.8 19.21L5.15 9.14M10.33 16.5h3.33M9.5 12.5h5"})}),eu=e=>(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...e,children:[(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M16 12.9v4.2c0 3.5-1.4 4.9-4.9 4.9H6.9C3.4 22 2 20.6 2 17.1v-4.2C2 9.4 3.4 8 6.9 8h4.2c3.5 0 4.9 1.4 4.9 4.9z"}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M22 6.9v4.2c0 3.5-1.4 4.9-4.9 4.9H16v-3.1C16 9.4 14.6 8 11.1 8H8V6.9C8 3.4 9.4 2 12.9 2h4.2C20.6 2 22 3.4 22 6.9z"})]}),ex=e=>(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...e,children:[(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M11 2H9C4 2 2 4 2 9v6c0 5 2 7 7 7h6c5 0 7-2 7-7v-2"}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"1.5",d:"M16.04 3.02L8.16 10.9c-.3.3-.6.89-.66 1.32l-.43 3.01c-.16 1.09.61 1.85 1.7 1.7l3.01-.43c.42-.06 1.01-.36 1.32-.66l7.88-7.88c1.36-1.36 2-2.94 0-4.94-2-2-3.58-1.36-4.94 0zM14.91 4.15a7.144 7.144 0 004.94 4.94"})]}),em=e=>(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...e,children:[(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M13.06 10.94a5.74 5.74 0 010 8.13c-2.25 2.24-5.89 2.25-8.13 0-2.24-2.25-2.25-5.89 0-8.13"}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M10.59 13.41c-2.34-2.34-2.34-6.14 0-8.49 2.34-2.35 6.14-2.34 8.49 0 2.35 2.34 2.34 6.14 0 8.49"})]}),eg=e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...e,children:(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 22c5.5 0 10-4.5 10-10S17.5 2 12 2 2 6.5 2 12s4.5 10 10 10zM12 8v5M11.995 16h.009"})});var ep=function(e){let{isOpen:t,closeModal:s,children:r}=e;return(0,p.useEffect)(()=>{function e(e){"Escape"===e.key&&s()}return document.addEventListener("keydown",e,!1),()=>{document.removeEventListener("keydown",e,!1)}},[]),(0,n.jsx)(n.Fragment,{children:t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{onClick:s,className:"fixed inset-0 z-30 hidden animate-fade-in bg-black-900/10 opacity-0 sm:block"}),(0,n.jsx)("div",{className:"fixed inset-0 z-30 w-full animate-fade-in-down-short bg-white p-8 opacity-0 shadow-2xl sm:top-[15%] sm:bottom-auto sm:m-auto sm:max-w-fit sm:rounded-lg",children:r})]})})},ev=function(e){let{openModal:t,views:s,router:r,saveView:l,loading:i,deleteView:a,deleteLoading:c,setToast:d}=e,[h,u]=(0,p.useState)(!1),[x,m]=(0,p.useState)(!1);function g(){u(!1)}function v(){m(!1)}let f=null==s?void 0:s.find(e=>e.id.toString()===r.query.view);return(0,n.jsx)("div",{className:"relative",children:f&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 text-lg font-medium text-black-900",children:[(0,n.jsx)("span",{children:f.name}),(0,n.jsx)(o.Z,{style:"ghost",size:"xxs",onClick:function(){u(!0)},children:(0,n.jsx)(ed.Z,{width:16,height:16})})]}),h&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{onClick:g,className:"fixed inset-0 z-20 hidden animate-fade-in bg-transparent opacity-0 sm:block"}),(0,n.jsx)("div",{className:"absolute left-0 top-10 z-[21] inline-flex w-[16rem] rounded-lg bg-white p-4 text-sm shadow-xl",children:(0,n.jsxs)("div",{className:"flex w-full flex-col gap-1",children:[(0,n.jsxs)(o.Z,{style:"dropdown",size:"sm",transition:!1,onClick:()=>{g(),t()},children:[(0,n.jsx)(ex,{width:24,height:24}),"Edit view"]}),(0,n.jsxs)(o.Z,{style:"dropdown",size:"sm",transition:!1,onClick:e=>{g(),l(e,!0,f)},loading:i,children:[(0,n.jsx)(eu,{width:24,height:24}),"Duplicate view"]}),(0,n.jsxs)(o.Z,{style:"dropdown",size:"sm",transition:!1,onClick:()=>{g(),t(void 0,"alerts")},loading:i,children:[(0,n.jsx)(ei,{width:24,height:24}),"Set up alert"]}),(0,n.jsxs)(o.Z,{style:"dropdown",size:"sm",transition:!1,onClick:()=>{navigator.clipboard.writeText(document.URL),d({hasError:!1,title:"Link copied!",message:"".concat(document.URL," has been copied to your clipboard.")})},children:[(0,n.jsx)(em,{width:24,height:24}),"Copy view link"]}),(0,n.jsx)(A,{setToast:d}),(0,n.jsx)("span",{className:"m-2 -mx-4 border-b border-black-200/40"}),(0,n.jsxs)(o.Z,{style:"dropdown",size:"sm",transition:!1,onClick:()=>{g(),m(!0)},children:[(0,n.jsx)(eh,{width:24,height:24}),"Delete view"]})]})})]}),(0,n.jsx)(ep,{isOpen:x,closeModal:v,children:(0,n.jsxs)("div",{className:"flex w-full flex-col gap-6 rounded-lg",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,n.jsx)("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-error-100 text-error-600",children:(0,n.jsx)(eg,{width:24,height:24})}),(0,n.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,n.jsx)("p",{className:"text-center text-lg font-medium text-black-900",children:"Are you sure you want to delete this view?"}),(0,n.jsx)("p",{className:"text-sm text-black-400",children:"This is a permanent action."})]})]}),(0,n.jsxs)("div",{className:"flex flex-wrap items-center justify-end gap-6",children:[(0,n.jsx)(o.Z,{type:"button",style:"ghost",onClick:v,children:"Cancel"}),(0,n.jsx)(o.Z,{type:"button",style:"delete",onClick:()=>{a(!0,f)},loading:c,children:c?"Deleting...":"Delete view"})]})]})})]})})};(r=l||(l={}))[r.SLACK=0]="SLACK",r[r.WEBHOOK=1]="WEBHOOK";var ef=function(e){let{viewId:t}=e,[s,r]=(0,p.useState)(!0),[n,i]=(0,p.useState)(!1),[a,o]=(0,p.useState)(!1),[c,d]=(0,p.useState)(!1),[h,u]=(0,p.useState)(),[x,m]=(0,p.useState)(!1),[g,v]=(0,p.useState)(),[f,j]=(0,p.useState)(0),[w,k]=(0,p.useState)(l.SLACK);function b(){s||r(!0),n&&i(!1),_.Z.getAlertsFromAView(t).then(e=>{e===Error?(r(!1),i(!0)):(r(!1),d(e.length>0),u(e))})}function y(){j(f+1)}function N(){j(0)}return(0,p.useEffect)(()=>{c||(s||r(!0),n&&i(!1),_.Z.getAlertsFromAView(t).then(e=>{e===Error?(r(!1),i(!0)):(r(!1),d(e.length>0))}),_.Z.getSlackIntegration().then(e=>{e===Error?(r(!1),i(!0)):(r(!1),o(e.enabled))})),c&&t&&b()},[c]),{loading:s,error:n,hasAlerts:c,isSlackConfigured:a,alerts:h,editAlert:x,currentAlert:g,alertsViewController:f,alertMethod:w,createOrEditAlert:function(e){if(e&&h){let t=h.find(t=>t.id===e);t&&v(t)}m(!0)},setViewControllerToAlertsBaseView:N,setViewControllerToDeleteView:function(){m(!1),j(3)},closeAlert:function(e){v(void 0),m(!1),N(),"hasChanges"===e&&b()},fetchViewAlerts:b,setAlertMethodInAndIncrementViewController:function(e){y(),k(e)},decrementViewController:function(){j(f-1)},incrementViewController:y}};let ej={BUDGET:"BUDGET",USAGE:"USAGE"},ew={viewId:"",name:"",type:"BUDGET",budget:"0"},ek={viewId:"",name:"",type:"USAGE",usage:"0"};var eb=function(e){let{alertMethod:t,viewId:s,currentAlert:r,closeAlert:l,setToast:n}=e,[i,a]=(0,p.useState)((null==r?void 0:r.type)||ej.BUDGET),[o,c]=(0,p.useState)(r||ew),[d,h]=(0,p.useState)(!1),u=!o.name||!o.budget&&!o.usage;return{selected:i,options:[{label:"Cost",image:"/assets/img/others/cost.svg",description:"If the total cost goes over the limit threshold",type:"BUDGET"},{label:"Resources",image:"/assets/img/others/resource.svg",description:"If the number of resources goes over the limit",type:"USAGE"}],alert:o,changeAlertType:function(e){e===ej.BUDGET&&(c(ew),a(e)),e===ej.USAGE&&(c(ek),a(e))},handleChange:function(e){c(t=>({...t,...e}))},buttonDisabled:u,submit:function(e,r,i){e.preventDefault(),h(!0);let a={...o};if(a.type===ej.BUDGET&&(a.budget=Number(a.budget)),a.type===ej.USAGE&&(a.usage=Number(a.usage)),a.isSlack=0===t,!i){a.viewId=s.toString();let e=JSON.stringify(a);_.Z.createAlert(e).then(e=>{e===Error||e.error?(h(!1),n({hasError:!0,title:"Alert not created",message:"There was an error creating this alert. Refer to the logs and try again."})):(h(!1),n({hasError:!1,title:"Alert created",message:"The alert was successfully created!"}),l("hasChanges"),r())})}if(i){let{id:e}=a;if(e){let t=JSON.stringify(a);_.Z.editAlert(e,t).then(e=>{e===Error||e.error?(h(!1),n({hasError:!0,title:"Alert not edited",message:"There was an error editing this alert. Refer to the logs and try again."})):(h(!1),n({hasError:!1,title:"Alert edited",message:"The alert was successfully edited!"}),l("hasChanges"))})}}},loading:d,deleteAlert:function(e){_.Z.deleteAlert(e).then(e=>{e===Error||e.error?(h(!1),n({hasError:!0,title:"Alert was not deleted",message:"There was an error deleting this alert. Refer to the logs and try again."})):(h(!1),n({hasError:!1,title:"Alert deleted",message:"The alert was successfully deleted!"}),l("hasChanges"))})}}},ey=function(e){let{alertMethod:t,viewId:s,closeAlert:r,setToast:l,viewControllerOnCancelButton:i,currentAlert:a}=e,{deleteAlert:c,loading:d}=eb({alertMethod:t,currentAlert:a,viewId:s,closeAlert:r,setToast:l});return(0,n.jsxs)("div",{className:"rounded-lg bg-komiser-100 p-6",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,n.jsx)(en(),{src:"/assets/img/others/warning.svg",alt:"Purplin",width:48,height:48,className:"mx-auto flex-shrink-0"}),(0,n.jsxs)("div",{className:"mb-8 flex flex-col items-center gap-2 px-4",children:[(0,n.jsx)("p",{className:"text-center font-semibold text-black-900",children:"Are you sure you want to delete this alert?"}),(0,n.jsxs)("p",{className:"text-center text-sm text-black-400",children:["By deleting the ",null==a?void 0:a.name,""," ",(null==a?void 0:a.isSlack)?"slack":"webhook"," alert, you wont receive any more notifications regarding the cost limit you set up."]})]})]}),(0,n.jsx)("div",{className:"flex items-center justify-end",children:(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsx)(o.Z,{style:"ghost",size:"lg",onClick:i,children:"Cancel"}),(0,n.jsx)(o.Z,{size:"sm",style:"delete",type:"button",onClick:()=>{i(),a&&c(a.id)},loading:d,children:"Delete alert"})]})})]})};let eN=e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...e,children:(0,n.jsx)("path",{stroke:"currentColor",d:"m8.91 19.92 6.52-6.52c.77-.77.77-2.03 0-2.8L8.91 4.08"})});var eC=function(e){let{alerts:t,createOrEditAlert:s,setViewControllerOnAddAlert:r}=e;return(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[null==t?void 0:t.map(e=>(0,n.jsxs)("div",{onClick:()=>s(e.id),className:"flex cursor-pointer select-none items-center justify-between rounded-lg border border-black-170 p-6 hover:border-black-200",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(en(),{src:e.isSlack?"/assets/img/others/slack.svg":"/assets/img/others/custom-webhook.svg",height:42,width:42,alt:e.isSlack?"Slack logo":"Webhook logo"}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("p",{className:"font-semibold text-black-900",children:e.name}),(0,n.jsx)("p",{className:"text-xs text-black-400",children:e.budget?"When total cost is over $".concat((0,j.Z)(Number(e.budget))):"When cloud resources are over ".concat((0,j.Z)(Number(e.usage)))})]})]}),(0,n.jsx)(eN,{width:24,height:24})]},e.id)),(0,n.jsx)("div",{className:"self-end",children:(0,n.jsx)(o.Z,{size:"lg",onClick:r,children:"Add alert"})})]})},eS=s(4184),eE=s.n(eS),eL=s(1437);let eT=e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...e,children:(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"1.5",d:"M9.57 18.07L3.5 12l6.07-6.07M20.5 12H3.67"})});var eM=s(7208),eO=function(e){let{alertMethod:t,setViewControllerOnSubmit:s,setViewControllerOnClickingBackButton:r,setViewControllerOnDelete:l,currentAlert:i,closeAlert:a,viewId:c,setToast:d}=e,{selected:h,options:u,alert:x,changeAlertType:m,handleChange:g,buttonDisabled:v,submit:f,loading:j}=eb({alertMethod:t,currentAlert:i,viewId:c,closeAlert:a,setToast:d}),[w,k]=(0,p.useState)(!1),[b,y]=(0,p.useState)(),[N,S]=(0,p.useState)(!1),E=i&&u.find(e=>e.type===i.type),L=0===t?"Slack":"Webhook";i?(x.isSlack=i.isSlack,L=i.isSlack?"Slack":"Webhook"):x.isSlack="Webhook"!==L;let T=async()=>{x.endpoint?(k(!0),_.Z.testEndpoint(x.endpoint).then(e=>{k(!1),S(e.success),y({success:e.success,message:e.message}),setTimeout(()=>{S(!1)},3e3)})):y({success:!1,message:"Please type an endpoint above"})};return(0,n.jsxs)("form",{onSubmit:e=>{i?f(e,s,"edit"):f(e,s)},className:"flex flex-col gap-6 text-sm",children:[!i&&(0,n.jsxs)("div",{onClick:()=>r(),className:"flex cursor-pointer items-center gap-2 self-start text-black-900",children:[(0,n.jsx)(eT,{width:24,height:24}),"Setup ",L," Alert"]}),i&&(0,n.jsxs)("div",{onClick:()=>a(),className:"flex cursor-pointer items-center gap-2 self-start text-black-900",children:[(0,n.jsx)(eT,{width:24,height:24}),"Edit ",i.isSlack?"Slack":"Webhook"," alert"]}),(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsx)("p",{className:"text-black-400",children:"Type"}),!i&&(0,n.jsx)(eL.Z,{gap:"sm",children:u.map(e=>{let t=h===e.type;return(0,n.jsx)("div",{onClick:()=>m(e.type),className:eE()("flex cursor-pointer flex-col items-start justify-center rounded-lg py-4 px-6 outline outline-black-200 hover:outline-black-300",{"outline-2 outline-primary hover:outline-primary":t}),children:(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(en(),{src:e.image,alt:e.label,height:42,width:42}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("p",{className:"text-base font-semibold text-black-900",children:e.label}),(0,n.jsx)("p",{className:"text-xs text-black-400",children:e.description})]})]})},e.label)})}),i&&(0,n.jsxs)("div",{className:"flex flex-col items-start justify-center",children:[(0,n.jsx)("p",{className:"text-base font-semibold text-black-900",children:null==E?void 0:E.label}),(0,n.jsx)("p",{className:"text-xs text-black-400",children:null==E?void 0:E.description})]})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsx)("p",{className:"text-black-400",children:"Details"}),"BUDGET"===h&&(0,n.jsxs)(eL.Z,{gap:"sm",children:[(0,n.jsx)(C,{label:"Name",name:"name",action:g,value:x.name}),(0,n.jsx)(C,{type:"number",label:"Limit (in $)",name:"budget",action:g,value:x.budget,min:0,positiveNumberOnly:!0})]}),"USAGE"===h&&(0,n.jsxs)(eL.Z,{gap:"sm",children:[(0,n.jsx)(C,{label:"Name",name:"name",action:g,value:x.name}),(0,n.jsx)(C,{type:"number",label:"Limit (of resources)",name:"usage",action:g,value:x.usage,min:0,positiveNumberOnly:!0})]})]}),"Webhook"===L&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsx)("p",{className:"text-black-400",children:"Output"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{type:"text",name:"endpoint",className:"peer mr-6 w-full rounded bg-white pl-4 pr-32 pt-[1.75rem] pb-[0.75rem] text-sm text-black-900 caret-primary outline outline-black-200 focus:outline-2 focus:outline-primary ".concat((null==b?void 0:b.success)===!1&&"outline-error-600 focus:outline-error-600"),placeholder:"",onChange:e=>{g({endpoint:e.target.value})},value:x.endpoint,autoComplete:"off","data-lpignore":"true","data-form-type":"other"}),(0,n.jsx)("span",{className:"pointer-events-none absolute left-4 bottom-[1.925rem] origin-left scale-75 select-none font-normal text-black-300 transition-all peer-placeholder-shown:left-4 peer-placeholder-shown:bottom-[1.15rem] peer-placeholder-shown:scale-[87.5%] peer-focus:bottom-[1.925rem] peer-focus:scale-75",children:"Endpoint"})]})}),(0,n.jsx)("span",{className:"absolute right-4 top-1/2 flex w-full -translate-y-1/2 transform cursor-pointer items-center gap-2 rounded bg-transparent text-sm font-medium text-primary text-primary active:bg-komiser-200 active:text-primary disabled:cursor-not-allowed sm:w-auto ".concat(w?"pointer-events-none opacity-50":""),onClick:T,children:w?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eM.Z,{}),(0,n.jsx)("span",{className:"align-center ml-1 flex justify-center",children:"Test Endpoint"})]}):(0,n.jsxs)(n.Fragment,{children:[N&&(0,n.jsx)(en(),{src:"/assets/img/others/tickmark.svg",height:20,width:20,alt:"tickmark",className:"-mr-1"}),(0,n.jsx)("span",{className:N?"text-green-600":"",children:N?"Valid Endpoint":"Test Endpoint"})]})})]}),(null==b?void 0:b.success)===!1&&(0,n.jsx)("p",{className:"-mt-2 text-xs text-error-600",children:b.message}),(0,n.jsx)(C,{label:"Secret (optional)",name:"secret",action:g,value:x.secret})]}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsxs)("p",{className:"text-xs text-black-400",children:["Well send a POST request to the endpoint. More information can be found in our"," ",(0,n.jsx)("a",{href:"https://docs.komiser.io/docs/guides/how-to-komiser/alerts#request-details",target:"_blank",rel:"noreferrer",className:"text-primary",children:(0,n.jsx)("u",{children:"developer documentation"})}),"."]})})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{children:i&&(0,n.jsx)(o.Z,{size:"lg",style:"delete",onClick:l,children:"Delete alert"})}),(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsx)(o.Z,{style:"ghost",size:"lg",onClick:a,children:"Cancel"}),(0,n.jsx)(o.Z,{type:"submit",size:"lg",disabled:v,loading:j,children:i?"Save changes":"Set up alert"})]})]})]})};let eZ=e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...e,children:(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M22 12c0 5.52-4.48 10-10 10s-8.89-5.56-8.89-5.56m0 0h4.52m-4.52 0v5M2 12C2 6.48 6.44 2 12 2c6.67 0 10 5.56 10 5.56m0 0v-5m0 5h-4.44"})});var e_=function(e){let{fetchViewAlerts:t}=e;return(0,n.jsx)("div",{className:"flex flex-col gap-4",children:(0,n.jsxs)("div",{className:"flex select-none items-center justify-between rounded-lg border border-black-170 p-6",children:[(0,n.jsx)("div",{className:"flex items-center gap-4",children:(0,n.jsx)("div",{className:"flex flex-col gap-2",children:(0,n.jsx)("p",{className:"text-sm text-black-400",children:"There was an error fetching the alerts"})})}),(0,n.jsxs)(o.Z,{style:"secondary",size:"sm",onClick:t,children:[(0,n.jsx)(eZ,{width:16,height:16}),"Try again"]})]})})},eI=function(e){let{incrementViewController:t}=e;return(0,n.jsx)("div",{className:"rounded-lg p-6",children:(0,n.jsxs)("div",{className:"flex items-center gap-6",children:[(0,n.jsx)(en(),{src:"/assets/img/purplin/tablet.svg",alt:"Purplin",width:140,height:180,className:"flex-shrink-0"}),(0,n.jsxs)("div",{className:"flex flex-col items-start gap-2 px-4",children:[(0,n.jsx)("p",{className:"font-semibold text-black-900",children:"It seems you have no alerts set up"}),(0,n.jsx)("p",{className:"text-sm text-black-400",children:"Set up budget or resources alerts to stay updated on your cloud infrastructure"}),(0,n.jsx)("span",{}),(0,n.jsx)(o.Z,{onClick:t,children:"Add alert"})]})]})})},ez=function(){let e=Array.from([,,].keys());return(0,n.jsx)("div",{className:"flex flex-col gap-4",children:e.map((e,t)=>(0,n.jsxs)("div",{className:"flex animate-pulse cursor-pointer select-none items-center justify-between rounded-lg border border-black-170 p-6 hover:border-black-200",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("div",{className:"h-[42px] w-[42px] rounded-full bg-komiser-200/50"}),(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("div",{className:"h-3 w-20 rounded-full bg-komiser-200/50"}),(0,n.jsx)("div",{className:"h-2 w-48 rounded-full bg-komiser-200/50"})]})]}),(0,n.jsx)("div",{className:"h-6 w-6 rounded-full bg-komiser-200/50"})]},t))})},eA=function(e){let{setAlertMethodInViewController:t,setViewControllerOnClickingBackButton:s,isSlackConfigured:r}=e,i=[{id:l.SLACK,name:"Slack",message:"Get directly notified to take action",image:"/assets/img/others/slack.svg",alt:"Slack logo"},{id:l.WEBHOOK,name:"Webhook",message:"Integrate actions into your system",image:"/assets/img/others/custom-webhook.svg",alt:"Webhook logo"}];return(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("div",{onClick:()=>s(),className:"flex cursor-pointer items-center gap-2 self-start text-sm text-black-900",children:[(0,n.jsx)(eT,{width:24,height:24}),"Pick a Handler"]}),null==i?void 0:i.map(e=>(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{onClick:()=>{(e.id!==l.SLACK||r)&&t(e.id)},className:"flex cursor-pointer select-none items-center justify-between rounded-lg border border-black-170 p-6 hover:border-black-200 \n                        ".concat(e.id!==l.SLACK||r?"":"pointer-events-none bg-gray-200"),children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(en(),{src:e.image,height:42,width:42,alt:e.alt}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("p",{className:"font-semibold text-black-900",children:e.name}),(0,n.jsx)("p",{className:"text-xs text-black-400",children:e.message})]})]}),(0,n.jsx)(eN,{width:24,height:24})]}),e.id===l.SLACK&&!r&&(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsxs)("p",{className:"text-xs text-black-400",children:["You have not set up your Slack integration. Learn how through our"," ",(0,n.jsx)("a",{href:"https://docs.komiser.io/docs/introduction/getting-started/#slack-integration-alerts",target:"_blank",rel:"noreferrer",className:"text-primary",children:(0,n.jsx)("u",{children:"guide"})}),"."]})})]},e.id))]})};let eW={NO_ALERTS_OR_EXSITING_ALERTS:0,CHOOSE_ALERT_METHOD:1,CREATE_OR_EDIT_ALERT:2,DELETE_ALERT:3};var eq=function(e){let{viewId:t,setToast:s}=e,{loading:r,error:l,hasAlerts:i,isSlackConfigured:a,alerts:o,alertsViewController:c,editAlert:d,alertMethod:h,currentAlert:u,setAlertMethodInAndIncrementViewController:x,setViewControllerToAlertsBaseView:m,setViewControllerToDeleteView:g,createOrEditAlert:p,incrementViewController:v,decrementViewController:f,closeAlert:j,fetchViewAlerts:w}=ef({viewId:t});if(r)return(0,n.jsx)(ez,{});if(l)return(0,n.jsx)(e_,{fetchViewAlerts:w});switch(c){case eW.NO_ALERTS_OR_EXSITING_ALERTS:if(!i)return(0,n.jsx)(eI,{incrementViewController:v});if(d)return(0,n.jsx)(eO,{alertMethod:h,setViewControllerOnSubmit:m,setViewControllerOnClickingBackButton:m,setViewControllerOnDelete:g,currentAlert:u,closeAlert:j,viewId:t,setToast:s});return(0,n.jsx)(eC,{alerts:o,createOrEditAlert:p,setViewControllerOnAddAlert:v});case eW.CHOOSE_ALERT_METHOD:return(0,n.jsx)(eA,{setAlertMethodInViewController:x,setViewControllerOnClickingBackButton:f,isSlackConfigured:a});case eW.CREATE_OR_EDIT_ALERT:return(0,n.jsx)(eO,{alertMethod:h,setViewControllerOnSubmit:m,setViewControllerOnClickingBackButton:f,setViewControllerOnDelete:v,currentAlert:u,closeAlert:j,viewId:t,setToast:s});case eW.DELETE_ALERT:return(0,n.jsx)(ey,{alertMethod:h,viewControllerOnCancelButton:f,currentAlert:u,closeAlert:j,viewId:t,setToast:s});default:return null}};let eB={id:0,name:"",filters:[],exclude:[]};var eP=function(e){let{setToast:t,views:s,router:r,getViews:l,hiddenResources:n,setHideOrUnhideHasUpdate:i}=e,[a,o]=(0,p.useState)(!1),[c,d]=(0,p.useState)(eB),[h,u]=(0,p.useState)(!1),[x,m]=(0,p.useState)(!1),[g,v]=(0,p.useState)("view"),[f,j]=(0,p.useState)([]),[w,k]=(0,p.useState)(!1),[b,y]=(0,p.useState)(!1);function N(){o(!1)}return{isOpen:a,openModal:function(e,t){if(v("view"),j([]),k(!1),!r.query.view&&e)d(eB),d(t=>({...t,filters:e}));else{let e=s.find(e=>e.id.toString()===r.query.view);d(e)}t&&v(t),o(!0)},closeModal:N,view:c,handleChange:function(e){d(t=>({...t,name:e.name}))},saveView:function(e,s,n){if(e.preventDefault(),c&&!s){u(!0);let e=JSON.stringify(c),{id:s}=c;r.query.view?_.Z.updateView(s.toString(),e).then(e=>{e===Error?(u(!1),t({hasError:!0,title:"".concat(c.name," could not be saved."),message:"There was an error saving this custom view. Please refer to the logs and try again!"})):(u(!1),l(!0,c.id.toString()),t({hasError:!1,title:"".concat(c.name," has been saved."),message:"The custom view has been successfully saved."}),N())}):_.Z.saveView(e).then(e=>{e===Error?(u(!1),t({hasError:!0,title:"".concat(c.name," could not be created."),message:"There was an error creating this custom view. Please refer to the logs and try again!"})):(u(!1),l(!1,void 0,!0),t({hasError:!1,title:"".concat(c.name," has been created."),message:"The custom view will now be accessible from the side navigation."}),N())})}if(s&&n){u(!0);let e=n;e.id=0,e.name="(copy) ".concat(e.name);let s=JSON.stringify(e);_.Z.saveView(s).then(e=>{e===Error?(u(!1),t({hasError:!0,title:"".concat(n.name," could not be duplicated."),message:"There was an error duplicating this custom view. Please refer to the logs and try again!"})):(u(!1),l(!1,void 0,!0),t({hasError:!1,title:"".concat(n.name," has been duplicated."),message:"The custom view will now be accessible from the side navigation."}),N())})}},loading:h,page:g,goTo:function(e){v(e)},deleteView:function(e,s){if(c&&!e){u(!0);let{id:e}=c;_.Z.deleteView(e.toString()).then(e=>{e===Error?(u(!1),t({hasError:!0,title:"".concat(c.name," could not be deleted."),message:"There was an error deleting this custom view. Please refer to the logs and try again!"})):(l(),u(!1),t({hasError:!1,title:"".concat(c.name," has been deleted."),message:"The custom view has been successfully deleted."}),N(),r.push(r.pathname))})}if(e&&s){m(!0);let{id:e}=s;_.Z.deleteView(e.toString()).then(e=>{e===Error?(m(!1),t({hasError:!0,title:"".concat(s.name," could not be deleted."),message:"There was an error deleting this custom view. Please refer to the logs and try again!"})):(l(),m(!1),t({hasError:!1,title:"".concat(s.name," has been deleted."),message:"The custom view has been successfully deleted."}),r.push(r.pathname))})}},bulkItems:f,bulkSelectCheckbox:w,onCheckboxChange:function(e,t){if(e.target.checked){let e=[...f];e.push(t),j(e)}else{let e=f.filter(e=>e!==t);j(e)}},handleBulkSelection:function(e){if(e.target.checked&&n){let e=n.map(e=>e.id);j(e),k(!0)}else j([]),k(!1)},unhideLoading:b,unhideResources:function(){if(!r.query.view||0===f.length)return;let e=n.map(e=>e.id),s=e.filter(e=>-1===f.indexOf(e)),l=r.query.view.toString(),a={id:Number(l),exclude:s},o=JSON.stringify(a);_.Z.unhideResourceFromView(l,o).then(e=>{e===Error?(y(!1),t({hasError:!0,title:"Resources could not be unhid.",message:"There was an error unhiding the resources. Please refer to the logs and try again."})):(y(!1),t({hasError:!1,title:"Resources are now unhidden.",message:"The resources were successfully unhidden."}),i(!0),N())})},deleteLoading:x}},eV=function(e){let{filters:t,displayedFilters:s,setToast:r,inventoryStats:l,router:i,views:a,getViews:c,hiddenResources:d,setHideOrUnhideHasUpdate:h}=e,{isOpen:u,openModal:m,closeModal:g,view:p,handleChange:v,saveView:f,loading:k,page:N,goTo:S,deleteView:E,bulkItems:L,bulkSelectCheckbox:T,onCheckboxChange:M,handleBulkSelection:Z,unhideLoading:_,unhideResources:I,deleteLoading:z}=eP({setToast:r,views:a,router:i,getViews:c,hiddenResources:d,setHideOrUnhideHasUpdate:h});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ev,{openModal:m,views:a,router:i,saveView:f,setToast:r,loading:k,deleteView:E,deleteLoading:z}),i.query.view&&(0,n.jsx)("div",{className:"absolute right-0",children:(0,n.jsxs)(o.Z,{style:"secondary",size:"xs",transition:!1,onClick:()=>{m(void 0,"alerts")},loading:k,children:[(0,n.jsx)(ei,{width:20,height:20}),"Alerts"]})}),!i.query.view&&(0,n.jsxs)(o.Z,{size:"sm",onClick:()=>m(t),children:[(0,n.jsx)(ea,{width:20,height:20}),"Save as a view"]}),(0,n.jsxs)(b,{isOpen:u,closeModal:g,noScroll:!0,children:[(0,n.jsx)(eo,{title:i.query.view?p.name:"Save as a view",subtitle:"".concat(null==l?void 0:l.resources," ").concat((null==l?void 0:l.resources)===1?"resource":"resources"," ").concat(i.query.view?"are part of this view":"will be added to this view"),deleteAction:i.query.view?()=>E(!1):void 0,deleteLabel:"Delete view",closeModal:g}),(0,n.jsx)(y,{goTo:S,page:N,tabs:i.query.view?["View","Alerts","Hidden Resources"]:["View"]}),(0,n.jsx)(ec,{page:N,param:"view",children:(0,n.jsxs)("form",{onSubmit:e=>f(e),className:"flex flex-col gap-4",children:[(0,n.jsx)("div",{className:"flex flex-col gap-2",children:s&&s.length>0&&s.map((e,t)=>(0,n.jsx)(x,{data:e},t))}),(0,n.jsx)(C,{name:"name",label:i.query.view?"View name":"Choose a view name",type:"text",error:"Please provide a name",value:p.name,action:v,autofocus:!0}),(0,n.jsx)("div",{className:"ml-auto",children:(0,n.jsxs)(o.Z,{size:"lg",type:"submit",loading:k,disabled:!p.name,children:[i.query.view?"Update view":"Save as a view"," ",(0,n.jsx)("span",{className:"flex items-center justify-center rounded-lg bg-black-900/20 py-1 px-2 text-xs",children:null==l?void 0:l.resources})]})})]})}),(0,n.jsx)(ec,{page:N,param:"alerts",children:(0,n.jsx)(eq,{viewId:p.id,setToast:r})}),(0,n.jsxs)(ec,{page:N,param:"hidden resources",children:[d&&d.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"max-h-[calc(100vh-300px)] overflow-y-auto overflow-x-hidden",children:(0,n.jsxs)("table",{className:"w-full table-auto bg-white text-left text-xs text-gray-900",children:[(0,n.jsx)("thead",{className:"bg-white",children:(0,n.jsxs)("tr",{className:"shadow-[inset_0_-1px_0_0_#cfd7d74d]",children:[(0,n.jsx)("th",{className:"py-4 px-2",children:(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(O.Z,{checked:T,onChange:Z})})}),(0,n.jsx)("th",{className:"py-4 px-2",children:"Cloud"}),(0,n.jsx)("th",{className:"py-4 px-2",children:"Service"}),(0,n.jsx)("th",{className:"py-4 px-2",children:"Name"}),(0,n.jsx)("th",{className:"py-4 px-2",children:"Region"}),(0,n.jsx)("th",{className:"py-4 px-2",children:"Account"}),(0,n.jsx)("th",{className:"py-4 px-2 text-right",children:"Cost"})]})}),(0,n.jsx)("tbody",{children:d.map(e=>(0,n.jsxs)("tr",{className:"border-b border-black-200/30 last:border-none ".concat(L&&L.find(t=>t===e.id)?"border-black-200/70 bg-komiser-120":"border-black-200/30 bg-white hover:bg-black-100/50"," border-b last:border-none"),children:[(0,n.jsx)("td",{className:"py-4 px-2",children:(0,n.jsx)(O.Z,{checked:L&&!!L.find(t=>t===e.id),onChange:t=>M(t,e.id)})}),(0,n.jsx)("td",{className:"py-4 pl-2 pr-6",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("picture",{className:"flex-shrink-0",children:(0,n.jsx)("img",{src:w.providerImg(e.provider),className:"h-6 w-6 rounded-full",alt:e.provider})}),(0,n.jsx)("span",{children:e.provider})]})}),(0,n.jsx)("td",{className:"py-4 px-2",children:e.service}),(0,n.jsx)("td",{className:"py-4 px-2",children:(0,n.jsx)("p",{className:"... w-24 truncate",children:e.name})}),(0,n.jsx)("td",{className:"py-4 px-2",children:(0,n.jsx)("p",{className:"... w-24 truncate",children:e.region})}),(0,n.jsx)("td",{className:"py-4 px-2",children:(0,n.jsx)("p",{className:"... w-24 truncate",children:e.account})}),(0,n.jsxs)("td",{className:"py-4 px-2 text-right",children:["$",(0,j.Z)(e.cost)]})]},e.id))})]})}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsxs)(o.Z,{size:"lg",disabled:L&&0===L.length,loading:_,onClick:I,children:["Unhide resources"," ",(0,n.jsx)("span",{className:"flex items-center justify-center rounded-lg bg-white/10 py-1 px-2 text-xs",children:(0,j.Z)(L.length)})]})})]}),d&&0===d.length&&(0,n.jsx)("div",{className:"rounded-lg bg-black-100 p-6",children:(0,n.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,n.jsx)(en(),{src:"/assets/img/purplin/dashboard.svg",alt:"Purplin",width:150,height:100}),(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2 px-24 text-center",children:[(0,n.jsx)("p",{className:"font-semibold text-black-900",children:"No hidden resources in this view"}),(0,n.jsx)("p",{className:"text-sm text-black-400",children:"To hide a resource from this view, select and hide them on the inventory table."})]})]})})]})]})]})},eR=function(){let[e,t]=(0,p.useState)(void 0);function s(){t(void 0)}return(0,p.useEffect)(()=>{let e=setTimeout(s,5e3);return()=>{clearTimeout(e)}},[e]),{toast:e,setToast:t,dismissToast:s}},eF=function(e){let[t,s]=(0,p.useState)(!1);return(0,p.useEffect)(()=>{let t=new IntersectionObserver(e=>{let[t]=e;return s(t.isIntersecting)});return e&&e.current&&t.observe(e.current),()=>{t.disconnect()}},[e]),t},eD=function(e,t,s){let r,l;if((r=s?[...(r=Object.values(e)).slice(0,2),r[2].toString()]:e.split(":"))[0].includes("tag:")){var n;let e=r[0].split(":");r=[e[0],e[1],r[1],null===(n=r[2])||void 0===n?void 0:n.toString()]}if("tag"===r[0]&&"fetch"===t){if(r.length>2){if(-1!==r.indexOf("IS_EMPTY")||-1!==r.indexOf("IS_NOT_EMPTY")||-1!==r.indexOf("EXISTS")||-1!==r.indexOf("NOT_EXISTS")){let e=r.slice(1,r.length-1).join(":");l={field:"".concat(r[0],":").concat(e),operator:r[r.length-1],values:[]}}else{let e=r.slice(1,r.length-2).join(":");l={field:"".concat(r[0],":").concat(e),operator:r[r.length-2],values:r[r.length-1].split(",")}}}else l={field:"".concat(r[0],":").concat(r[1]),operator:r[2],values:"IS_EMPTY"===r[2]||"IS_NOT_EMPTY"===r[2]?[]:r[3].split(",")}}if("tag"!==r[0]&&"fetch"===t&&(l={field:r[0],operator:r[1],values:"IS_EMPTY"===r[1]||"IS_NOT_EMPTY"===r[1]?[]:r[2].split(",")}),"tag"===r[0]&&"display"===t){if(r.length>2){if(-1!==r.indexOf("IS_EMPTY")||-1!==r.indexOf("IS_NOT_EMPTY")||-1!==r.indexOf("EXISTS")||-1!==r.indexOf("NOT_EXISTS"))l={field:r[0],tagKey:r[1],operator:r[2],values:[]};else{let e=r.slice(1,r.length-2).join(":");l={field:r[0],tagKey:e,operator:r[r.length-2],values:r[r.length-1].split(",")}}}else l={field:r[0],tagKey:r[1],operator:r[2],values:"IS_EMPTY"===r[2]||"IS_NOT_EMPTY"===r[2]?[]:r[3].split(",")}}return"tag"!==r[0]&&"display"===t&&(l={field:r[0],operator:r[1],values:"IS_EMPTY"===r[1]||"IS_NOT_EMPTY"===r[1]?[]:r[2].split(",")}),l},eH=function(e){let{router:t,views:s,setSearchedLoading:r,setStatsLoading:l,setToast:n,setError:i,setHiddenResources:a,setInventoryStats:o,batchSize:c,setSearchedInventory:d,setDisplayedFilters:h,setSkippedSearch:u,setHideOrUnhideHasUpdate:x,setShouldFetchMore:m}=e;if(t.query.view&&s&&s.length>0){let e=t.query.view,g=s.find(t=>t.id.toString()===e);if(!g)return setTimeout(()=>t.push(t.pathname),5e3),n({hasError:!0,title:"Invalid view",message:"We couldn't find this view. Redirecting back to home..."});{r(!0),l(!0);let t=JSON.stringify(null==g?void 0:g.filters);_.Z.getHiddenResourcesFromView(e).then(e=>{e===Error?i(!0):a(e)}),_.Z.getFilteredInventoryStats(t).then(e=>{e===Error?(i(!0),l(!1)):(o(e),l(!1))}),_.Z.getInventory("?limit=".concat(c,"&skip=0&view=").concat(e),t).then(e=>{if(e.error)n({hasError:!0,title:"Filter could not be applied!",message:"Please refresh the page and try again."}),i(!0),r(!1);else{d(e),u(e=>e+c),r(!1);let t=g.filters.map(e=>eD(e,"display",!0));h(t),x(!1),e.length>=c?m(!0):m(!1)}})}}return null},eK=function(e){let{router:t,setStatsLoading:s,setDisplayedFilters:r,setFilters:l,setError:n,setSearchedInventory:i,setInventoryStats:a,batchSize:o,setInventory:c,setSkipped:d}=e;t.query&&0===Object.keys(t.query).length&&!t.query.view&&(s(!0),r(void 0),i(void 0),l(void 0),_.Z.getInventoryStats().then(e=>{e===Error?(n(!0),s(!1)):(a(e),s(!1))}),_.Z.getInventory("?limit=".concat(o,"&skip=0")).then(e=>{e===Error?n(!0):(c(e),d(e=>e+o))}))},eY=function(e){let{router:t,setSearchedLoading:s,setStatsLoading:r,setToast:l,setError:n,setInventoryStats:i,batchSize:a,setSearchedInventory:o,setFilters:c,setDisplayedFilters:d,setSkippedSearch:h,setShouldFetchMore:u}=e;if(t.query&&Object.keys(t.query).length>0&&!t.query.view){if(Object.keys(t.query)[0].split(":").length<=1&&!t.query.view)return setTimeout(()=>t.push(t.pathname),5e3),l({hasError:!0,title:"Invalid URL params",message:"There was an error processing the page. Redirecting back to home..."});s(!0),r(!0);let e=Object.keys(t.query).map(e=>eD(e,"fetch")),x=Object.keys(t.query).map(e=>eD(e,"display")),m=JSON.stringify(e);_.Z.getFilteredInventoryStats(m).then(e=>{e===Error?(n(!0),r(!1)):(i(e),r(!1))}),_.Z.getInventory("?limit=".concat(a,"&skip=0"),m).then(t=>{t.error?(l({hasError:!0,title:"Filter could not be applied!",message:"Please refresh the page and try again."}),n(!0),s(!1)):(o(t),c(e),d(x),h(e=>e+a),s(!1),t.length>=a?u(!0):u(!1))})}return null},eU=function(e){let{router:t,shouldFetchMore:s,isVisible:r,views:l,query:n,batchSize:i,skippedSearch:a,setToast:o,setSearchedInventory:c,setShouldFetchMore:d,setSkippedSearch:h}=e;if(s&&r&&l&&l.length>0&&t.query.view&&!n){let e=t.query.view,s=l.find(t=>t.id.toString()===e);if(s){let t=JSON.stringify(null==s?void 0:s.filters);_.Z.getInventory("?limit=".concat(i,"&skip=").concat(a,"&view=").concat(e),t).then(e=>{e.error?o({hasError:!0,title:"There was an error fetching more resources!",message:"Please refresh the page and try again."}):(c(t=>t?[...t,...e]:e),h(e=>e+i),e.length>=i?d(!0):d(!1))})}}},eG=function(e){let{shouldFetchMore:t,isVisible:s,filters:r,query:l,batchSize:n,skippedSearch:i,setToast:a,setQuery:o,setSearchedInventory:c,setShouldFetchMore:d,setSkippedSearch:h}=e;if(t&&s&&r&&!l){let e=JSON.stringify(r);_.Z.getInventory("?limit=".concat(n,"&skip=").concat(i),e).then(e=>{e.error?a({hasError:!0,title:"There was an error fetching more resources!",message:"Please refresh the page and try again."}):(o(""),c(t=>t?[...t,...e]:e),e.length>=n?d(!0):d(!1),h(e=>e+n))})}},eX=function(e){let{inventory:t,inventoryStats:s,skipped:r,isVisible:l,query:n,filters:i,router:a,batchSize:o,setToast:c,setInventory:d,setSkipped:h}=e;t&&t.length>0&&s&&r<s.resources&&l&&!n&&!i&&!a.query.view&&_.Z.getInventory("?limit=".concat(o,"&skip=").concat(r)).then(e=>{e===Error?c({hasError:!0,title:"There was an error fetching more resources!",message:"Please refresh the page and try again."}):(d(t=>t?[...t,...e]:e),h(e=>e+o))})},eJ=function(e){let{shouldFetchMore:t,isVisible:s,filters:r,query:l,router:n,batchSize:i,skippedSearch:a,setToast:o,setSearchedInventory:c,setShouldFetchMore:d,setSkippedSearch:h}=e;if(t&&s&&l&&Object.keys(n.query).length>0&&!n.query.view){let e="";!n.query.view&&r&&r.length>0&&(e=JSON.stringify(r)),_.Z.getInventory("?limit=".concat(i,"&skip=").concat(a,"&query=").concat(l),e).then(e=>{e.error?o({hasError:!0,title:"There was an error fetching more resources!",message:"Please refresh the page and try again."}):(c(t=>t?[...t,...e]:e),e.length>=i?d(!0):d(!1),h(e=>e+i))})}},eQ=function(e){let{router:t,shouldFetchMore:s,isVisible:r,views:l,query:n,batchSize:i,skippedSearch:a,setToast:o,setSearchedInventory:c,setShouldFetchMore:d,setSkippedSearch:h}=e;if(s&&r&&n&&t.query.view&&l&&l.length>0){let e=t.query.view,s=l.find(t=>t.id.toString()===e);if(s){let t=JSON.stringify(null==s?void 0:s.filters);_.Z.getInventory("?limit=".concat(i,"&skip=").concat(a,"&query=").concat(n,"&view=").concat(e),t).then(e=>{e.error?o({hasError:!0,title:"There was an error fetching more resources!",message:"Please refresh the page and try again."}):(c(t=>t?[...t,...e]:e),h(e=>e+i),e.length>=i?d(!0):d(!1))})}}},e$=function(e){let{shouldFetchMore:t,isVisible:s,query:r,router:l,batchSize:n,skippedSearch:i,setToast:a,setSearchedInventory:o,setShouldFetchMore:c,setSkippedSearch:d}=e;t&&s&&r&&0===Object.keys(l.query).length&&_.Z.getInventory("?limit=".concat(n,"&skip=").concat(i,"&query=").concat(r)).then(e=>{e===Error&&a({hasError:!0,title:"There was an error fetching more resources!",message:"Please refresh the page and try again."}),o(t=>t?[...t,...e]:e),e.length>=n?c(!0):c(!1),d(e=>e+n)})},e0=function(){let[e,t]=(0,p.useState)(),[s,r]=(0,p.useState)(),[l,n]=(0,p.useState)(!1),[i,a]=(0,p.useState)(0),[o,c]=(0,p.useState)(0),[d,h]=(0,p.useState)(!1),[u,x]=(0,p.useState)(""),[m,g]=(0,p.useState)(),[v,f]=(0,p.useState)(!1),[j,w]=(0,p.useState)(!1),[k,b]=(0,p.useState)(),[y,N]=(0,p.useState)("tags"),[C,S]=(0,p.useState)(),[E,T]=(0,p.useState)(!1),[M,O]=(0,p.useState)(!1),[Z,I]=(0,p.useState)([]),[z,A]=(0,p.useState)(!1),[W,q]=(0,p.useState)(),[B,P]=(0,p.useState)(),[V,R]=(0,p.useState)(!1),[F,D]=(0,p.useState)(!1),[H,K]=(0,p.useState)(),[Y,U]=(0,p.useState)(),[G,X]=(0,p.useState)(!1),[J,Q]=(0,p.useState)(!1),{toast:$,setToast:ee,dismissToast:et}=eR(),es=(0,p.useRef)(null),er=eF(es),el=(0,L.useRouter)();function en(){a(0),c(0),I([]),A(!1),x(""),P(void 0),q(void 0),f(!1)}function ei(e,t,s){_.Z.getViews().then(r=>{if(r===Error)ee({hasError:!0,title:"The custom views couldn't be loaded.",message:"There was a problem fetching the views. Please try again."}),n(!0);else if(r.sort((e,t)=>e.id-t.id),K(r),e&&t&&el.push("?view=".concat(t),void 0,{shallow:!0}),s){let e=r[r.length-1].id;el.push("?view=".concat(e),void 0,{shallow:!0})}})}function ea(){b(void 0),N("tags")}function eo(){w(!1)}(0,p.useEffect)(()=>{en(),H||ei(),H&&(eK({router:el,setStatsLoading:D,setDisplayedFilters:q,setFilters:P,setError:n,setSearchedInventory:g,setInventoryStats:t,batchSize:50,setInventory:r,setSkipped:a}),eY({router:el,setSearchedLoading:R,setStatsLoading:D,setToast:ee,setError:n,setInventoryStats:t,batchSize:50,setSearchedInventory:g,setFilters:P,setDisplayedFilters:q,setSkippedSearch:c,setShouldFetchMore:f}),eH({router:el,views:H,setSearchedLoading:R,setStatsLoading:D,setToast:ee,setError:n,setHiddenResources:U,setInventoryStats:t,batchSize:50,setSearchedInventory:g,setDisplayedFilters:q,setSkippedSearch:c,setHideOrUnhideHasUpdate:Q,setShouldFetchMore:f}))},[el.query,H]),(0,p.useEffect)(()=>{eX({inventory:s,inventoryStats:e,skipped:i,isVisible:er,query:u,filters:B,router:el,batchSize:50,setToast:ee,setInventory:r,setSkipped:a}),eG({shouldFetchMore:v,isVisible:er,filters:B,query:u,batchSize:50,skippedSearch:o,setToast:ee,setQuery:x,setSearchedInventory:g,setShouldFetchMore:f,setSkippedSearch:c}),e$({shouldFetchMore:v,isVisible:er,query:u,router:el,batchSize:50,skippedSearch:o,setToast:ee,setSearchedInventory:g,setShouldFetchMore:f,setSkippedSearch:c}),eJ({shouldFetchMore:v,isVisible:er,filters:B,query:u,router:el,batchSize:50,skippedSearch:o,setToast:ee,setSearchedInventory:g,setShouldFetchMore:f,setSkippedSearch:c}),eU({router:el,shouldFetchMore:v,isVisible:er,views:H,query:u,batchSize:50,skippedSearch:o,setToast:ee,setSearchedInventory:g,setShouldFetchMore:f,setSkippedSearch:c}),eQ({router:el,shouldFetchMore:v,isVisible:er,views:H,query:u,batchSize:50,skippedSearch:o,setToast:ee,setSearchedInventory:g,setShouldFetchMore:f,setSkippedSearch:c})},[er]),(0,p.useEffect)(()=>{let e,s,l,i=!0;if(c(0),f(!1),I([]),A(!1),!H||u||el.query.view||B||eK({router:el,setStatsLoading:D,setDisplayedFilters:q,setFilters:P,setError:n,setSearchedInventory:g,setInventoryStats:t,batchSize:50,setInventory:r,setSkipped:a}),H&&!u&&!el.query.view&&B&&B.length>0&&eY({router:el,setSearchedLoading:R,setStatsLoading:D,setToast:ee,setError:n,setInventoryStats:t,batchSize:50,setSearchedInventory:g,setFilters:P,setDisplayedFilters:q,setSkippedSearch:c,setShouldFetchMore:f}),H&&!u&&el.query.view&&eH({router:el,views:H,setSearchedLoading:R,setStatsLoading:D,setToast:ee,setError:n,setHiddenResources:U,setInventoryStats:t,batchSize:50,setSearchedInventory:g,setDisplayedFilters:q,setSkippedSearch:c,setHideOrUnhideHasUpdate:Q,setShouldFetchMore:f}),u){if(R(!0),B||!u||el.query.view||(e=[]),B&&B.length>0&&!el.query.view&&(e=B),el.query.view&&H&&H.length>0){l=el.query.view.toString();let t=H.find(e=>e.id.toString()===el.query.view);t&&(e=t.filters)}setTimeout(()=>{s=JSON.stringify(e),i&&_.Z.getInventory("?limit=".concat(50,"&skip=0&query=").concat(u).concat(l?"&view=".concat(l):""),s).then(e=>{i&&(e.error?(ee({hasError:!0,title:"Search error",message:"There was an error searching for ".concat(u,". Please refer to the logs and try again.")}),n(!0),R(!1)):(g(e),c(e=>e+50),R(!1),e.length>=50?f(!0):f(!1)))})},700)}return()=>{i=!1}},[u]),(0,p.useEffect)(()=>{J&&(en(),eH({router:el,views:H,setSearchedLoading:R,setStatsLoading:D,setToast:ee,setError:n,setHiddenResources:U,setInventoryStats:t,batchSize:50,setSearchedInventory:g,setDisplayedFilters:q,setSkippedSearch:c,setHideOrUnhideHasUpdate:Q,setShouldFetchMore:f}))},[J]),(0,p.useEffect)(()=>{let e=!0;return d&&(0===Object.keys(el.query).length?_.Z.getInventory("?limit=".concat(50,"&skip=0")).then(t=>{e&&(t===Error?(n(!0),ee({hasError:!0,title:"There was an error re-fetching the resources!",message:"Please refresh the page and try again."})):(x(""),r(t),a(50),h(!1)))}):(c(0),h(!1),el.push(el.asPath,void 0,{shallow:!0}))),()=>{e=!1}},[d]);let ec=!l&&e&&0===Object.keys(e).length||!l&&s&&0===s.length,ed=!el.query.view,eh=B&&B.length>0||el.query.view,eu=!l&&!el.query.view&&(s&&s.length>0||m&&m.length>0),ex=Object.keys(el.query).length>0&&!W&&!l,em=Object.keys(el.query).length>0&&W&&W.length>0,eg=!s&&!l&&!u&&!W&&!el.query.view;return{inventoryStats:e,inventory:s,searchedInventory:m,error:l,query:u,setQuery:x,openModal:function(e){ea(),b(e),e.tags&&e.tags.length>0?S(e.tags):S([{key:"",value:""}]),w(!0)},isOpen:j,closeModal:eo,data:k,page:y,goTo:function(e){N(e)},tags:C,handleChange:function(e,t){if(C&&"number"==typeof t){let s=[...C];s[t]={...s[t],...e},S(s)}},addNewTag:function(){C&&S(e=>e?[...e,{key:"",value:""}]:[{key:"",value:""}])},removeTag:function(e){if(C){let t=[...C.slice(0,e),...C.slice(e+1)];S(t)}},loading:E,updateTags:function(e){if(C&&k){let t;let s=k.id;e?(O(!0),t=JSON.stringify([])):(T(!0),t=JSON.stringify(C)),_.Z.saveTags(s,t).then(t=>{t===Error?(T(!1),O(!1),ee({hasError:!0,title:"Tags were not ".concat(e?"deleted":"saved","!"),message:"There was an error ".concat(e?"deleting":"saving"," the tags. Please try again later.")})):(T(!1),O(!1),ee({hasError:!1,title:"Tags have been ".concat(e?"deleted":"saved","!"),message:"The tags have been ".concat(e?"deleted":"saved"," for ").concat(k.provider," ").concat(k.service," ").concat(k.name)}),a(0),h(!0),eo())})}},toast:$,setToast:ee,dismissToast:et,deleteLoading:M,reloadDiv:es,bulkItems:Z,onCheckboxChange:function(e,t){if(e.target.checked){let e=[...Z];e.push(t),I(e)}else{let e=Z.filter(e=>e!==t);I(e)}},handleBulkSelection:function(e){if(s&&e.target.checked&&!u){let e=s.map(e=>e.id);I(e),A(!0)}if(!s||e.target.checked||u||(I([]),A(!1)),m&&e.target.checked){let e=m.map(e=>e.id);I(e),A(!0)}m&&!e.target.checked&&(I([]),A(!1))},bulkSelectCheckbox:z,openBulkModal:function(){ea(),S([{key:"",value:""}]),w(!0)},updateBulkTags:function(e){if(!k&&C&&Z){let t={resources:Z,tags:C};e?(O(!0),t.tags=[]):T(!0);let s=JSON.stringify(t);_.Z.bulkSaveTags(s).then(t=>{t===Error?(T(!1),O(!1),ee({hasError:!0,title:"Tags were not ".concat(e?"deleted":"saved","!"),message:"There was an error ".concat(e?"deleting":"saving"," the tags. Please try again later.")})):(T(!1),O(!1),ee({hasError:!1,title:"Tags have been ".concat(e?"deleted":"saved","!"),message:"The tags have been ".concat(e?"deleted":"saved"," for ").concat(Z.length," ").concat(Z.length>1?"resources":"resource")}),h(!0),I([]),eo())})}},router:el,filters:B,displayedFilters:W,setSkippedSearch:c,deleteFilter:function(e){let t=[...B];t.splice(e,1);let s=t.map(e=>"".concat(e.field).concat(":".concat(e.operator)).concat(e.values.length>0?":".concat(e.values):"")).join("&");el.push(s?"?".concat(s):"",void 0,{shallow:!0})},searchedLoading:V,statsLoading:F,views:H,getViews:ei,hiddenResources:Y,hideResourceFromCustomView:function(){if(!el.query.view||0===Z.length)return;let e=Y.map(e=>e.id),t=[...e,...Z];X(!0);let s=el.query.view.toString(),r={id:Number(s),exclude:t},l=JSON.stringify(r);_.Z.hideResourceFromView(s,l).then(e=>{e===Error?(X(!1),ee({hasError:!0,title:"Resources could not be hid.",message:"There was an error hiding the resources. Please refer to the logs and try again."})):(X(!1),ee({hasError:!1,title:"Resources are now hidden.",message:"The resources were successfully hidden. They can be unhid from the custom view management."}),Q(!0))})},hideResourcesLoading:G,setHideOrUnhideHasUpdate:Q,hasErrorAndNoInventory:l&&!e||l&&!s,hasNoInventory:ec,isNotCustomView:ed,hasFilterOrCustomView:eh,displayFilterIfIsNotCustomView:eu,loadingFilters:ex,hasFilters:em,loadingInventory:eg}},e1=function(){return(0,n.jsxs)("div",{className:"mb-6 flex h-14 flex-wrap items-center gap-x-4 gap-y-2 rounded-lg bg-white py-2 px-6",children:[(0,n.jsx)("div",{className:"text-sm text-black-400",children:"Filters"}),(0,n.jsxs)("div",{className:"flex h-10 w-[20%] animate-pulse items-center gap-2 rounded bg-komiser-100 py-2 px-3",children:[(0,n.jsx)("div",{className:"h-5 w-5 flex-shrink-0 rounded-full bg-komiser-200/50"}),(0,n.jsx)("div",{className:"h-5 w-full rounded bg-komiser-200/50"})]})]})},e2=function(e){let{NumOfCards:t=3}=e,s=Array.from(Array(t).keys());return(0,n.jsx)("div",{className:"grid-col grid gap-8 md:grid-cols-2 ".concat(4===t?"lg:grid-cols-4":"lg:grid-cols-3"),children:s.map(e=>(0,n.jsx)("div",{className:"flex h-[7.5rem] animate-pulse items-center rounded-lg bg-white px-6 text-sm",children:(0,n.jsxs)("div",{className:"flex w-full gap-6",children:[(0,n.jsx)("div",{className:"h-10 w-10 flex-shrink-0 rounded-xl bg-komiser-200/50"}),(0,n.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[(0,n.jsx)("div",{className:"h-4 w-[36%] rounded-lg bg-komiser-200/50"}),(0,n.jsx)("div",{className:"h-4 w-[86%] rounded-lg bg-komiser-200/50"})]})]})},e))})},e4=function(e){let{size:t="md"}=e;return(0,n.jsx)("div",{className:"md"===t?"mt-6":""})};let e5=e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...e,children:(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M12 22c5.5 0 10-4.5 10-10S17.5 2 12 2 2 6.5 2 12s4.5 10 10 10zM12 8v5M11.995 16h.009"})}),e3=e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...e,children:(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M20 6L9 17l-5-5"})});var e6=function(e){let{hasError:t,title:s,message:r,dismissToast:l}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:eE()("fixed bottom-4 left-4 right-4 z-40 flex max-w-2xl animate-fade-in-up items-center justify-between overflow-hidden rounded-lg py-4 px-6 text-black-900 opacity-0 shadow-2xl sm:left-8",{"bg-error-100":t,"bg-success-100":!t}),children:[(0,n.jsx)("div",{className:eE()("absolute bottom-0 left-0 h-1 animate-width-to-fit",{"bg-error-600/60":t,"bg-success-600/60":!t})}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("div",{className:eE()({"text-error-600":t,"text-success-600":!t}),children:t?(0,n.jsx)(e5,{width:24,height:24}):(0,n.jsx)(e3,{width:24,height:24})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm font-medium",children:s}),(0,n.jsx)("p",{className:"text-sm text-black-900/60",dangerouslySetInnerHTML:{__html:r}})]})]}),(0,n.jsx)("div",{className:"w-12"}),(0,n.jsx)(o.Z,{style:"text",onClick:l,children:"Dismiss"})]})})};function e7(){let{inventoryStats:e,inventory:t,searchedInventory:s,error:r,query:l,setQuery:i,openModal:h,isOpen:u,closeModal:x,data:p,page:v,goTo:j,tags:w,handleChange:k,addNewTag:b,removeTag:y,loading:N,updateTags:C,toast:S,setToast:L,dismissToast:T,deleteLoading:O,reloadDiv:_,bulkItems:I,onCheckboxChange:z,handleBulkSelection:A,bulkSelectCheckbox:W,openBulkModal:q,updateBulkTags:B,router:P,filters:V,displayedFilters:R,setSkippedSearch:D,deleteFilter:H,searchedLoading:K,statsLoading:Y,views:U,getViews:G,hiddenResources:X,hideResourceFromCustomView:J,hideResourcesLoading:Q,setHideOrUnhideHasUpdate:$,hasErrorAndNoInventory:ee,hasNoInventory:et,isNotCustomView:es,hasFilterOrCustomView:el,displayFilterIfIsNotCustomView:en,loadingFilters:ei,hasFilters:ea,loadingInventory:eo}=e0();return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)(a(),{children:[(0,n.jsx)("title",{children:"Inventory - Komiser"}),(0,n.jsx)("meta",{name:"description",content:"Inventory - Komiser"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsxs)(f,{views:U,router:P,error:r,inventory:t,searchedInventory:s,children:[(0,n.jsxs)(g,{isNotCustomView:es,children:[el&&(0,n.jsx)(eV,{filters:V,displayedFilters:R,setToast:L,inventoryStats:e,router:P,views:U,getViews:G,hiddenResources:X,setHideOrUnhideHasUpdate:$}),en&&(0,n.jsx)(er,{router:P,setSkippedSearch:D,setToast:L})]}),(0,n.jsx)(e4,{}),ei&&(0,n.jsx)(e1,{}),(0,n.jsx)(m,{hasFilters:ea,displayedFilters:R,isNotCustomView:es,deleteFilter:H,router:P}),!r&&Y&&(0,n.jsx)(e2,{NumOfCards:es?3:4}),(0,n.jsx)(M,{inventoryStats:e,error:r,statsLoading:Y,hiddenResources:X}),(0,n.jsx)(e4,{}),eo&&(0,n.jsx)(Z,{}),(0,n.jsx)(F,{error:r,inventory:t,searchedInventory:s,query:l,openModal:h,setQuery:i,bulkSelectCheckbox:W,handleBulkSelection:A,bulkItems:I,onCheckboxChange:z,inventoryStats:e,openBulkModal:q,router:P,searchedLoading:K,hideResourceFromCustomView:J,hideResourcesLoading:Q,setToast:L}),(0,n.jsx)("div",{ref:_}),(0,n.jsx)(E,{isOpen:u,closeModal:x,data:p,goTo:j,page:v,updateTags:C,tags:w,handleChange:k,removeTag:y,addNewTag:b,loading:N,deleteLoading:O,bulkItems:I,updateBulkTags:B}),ee&&(0,n.jsx)(d.Z,{title:"Network request error",message:"There was an error fetching the inventory resources. Check out the server logs for more info and try again.",action:(0,n.jsx)(o.Z,{size:"lg",style:"secondary",onClick:()=>P.reload(),children:"Refresh the page"})}),et&&(0,n.jsx)(c.Z,{title:"No inventory available",message:"Check if your connected cloud accounts have active services running or if you have attached the proper permissions.",action:()=>{P.push("https://docs.komiser.io/docs/overview/introduction/getting-started/?utm_source=komiser&utm_medium=referral&utm_campaign=static")},actionLabel:"Check our docs",mascotPose:"thinking"})]}),S&&(0,n.jsx)(e6,{...S,dismissToast:T})]})}},9008:function(e,t,s){e.exports=s(3121)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8368)}),_N_E=e.O()}]);